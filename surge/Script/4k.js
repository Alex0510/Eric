var _0xodY='jsjiami.cn.v7';const _0x4e9ae9=_0x3eb9;(function(_0x3a319b,_0x2bc34f,_0x2f1722,_0x63aa39,_0x1d7ce2,_0x3921fe,_0x490ce2){return _0x3a319b=_0x3a319b>>0x7,_0x3921fe='hs',_0x490ce2='hs',function(_0x2e648f,_0x59c171,_0xc53697,_0x1351be,_0x506611){const _0x3ead43=_0x3eb9;_0x1351be='tfi',_0x3921fe=_0x1351be+_0x3921fe,_0x506611='up',_0x490ce2+=_0x506611,_0x3921fe=_0xc53697(_0x3921fe),_0x490ce2=_0xc53697(_0x490ce2),_0xc53697=0x0;const _0x487273=_0x2e648f();while(!![]&&--_0x63aa39+_0x59c171){try{_0x1351be=-parseInt(_0x3ead43(0x100,'oE&P'))/0x1+parseInt(_0x3ead43(0xe3,'oq5*'))/0x2*(parseInt(_0x3ead43(0xf0,'ECAU'))/0x3)+parseInt(_0x3ead43(0xdc,'ndF$'))/0x4+parseInt(_0x3ead43(0xd2,'e!JN'))/0x5*(-parseInt(_0x3ead43(0xe5,'08a7'))/0x6)+parseInt(_0x3ead43(0x107,'08a7'))/0x7+-parseInt(_0x3ead43(0xee,'ndF$'))/0x8*(-parseInt(_0x3ead43(0xcb,'aXks'))/0x9)+parseInt(_0x3ead43(0xf7,'xmjz'))/0xa;}catch(_0x532306){_0x1351be=_0xc53697;}finally{_0x506611=_0x487273[_0x3921fe]();if(_0x3a319b<=_0x63aa39)_0xc53697?_0x1d7ce2?_0x1351be=_0x506611:_0x1d7ce2=_0x506611:_0xc53697=_0x506611;else{if(_0xc53697==_0x1d7ce2['replace'](/[eQDSBKFGxVowpXfdkUC=]/g,'')){if(_0x1351be===_0x59c171){_0x487273['un'+_0x3921fe](_0x506611);break;}_0x487273[_0x490ce2](_0x506611);}}}}}(_0x2f1722,_0x2bc34f,function(_0x3c4e32,_0x325923,_0x124468,_0x39097d,_0x43c65a,_0x5c5e73,_0x32e323){return _0x325923='\x73\x70\x6c\x69\x74',_0x3c4e32=arguments[0x0],_0x3c4e32=_0x3c4e32[_0x325923](''),_0x124468=`\x72\x65\x76\x65\x72\x73\x65`,_0x3c4e32=_0x3c4e32[_0x124468]('\x76'),_0x39097d=`\x6a\x6f\x69\x6e`,(0x185866,_0x3c4e32[_0x39097d](''));});}(0x6380,0xbc7a0,_0x4da5,0xc9),_0x4da5)&&(_0xodY=`\x8da`);const _0x41c3e9=(function(){const _0x13b249=_0x3eb9,_0x34bdd5={'XMaxe':function(_0x579cb0,_0x3e27eb){return _0x579cb0!==_0x3e27eb;},'BzQUS':_0x13b249(0xe1,'euHP'),'LreFh':_0x13b249(0xfe,'Z*oq'),'vCzoy':_0x13b249(0xcc,'euHP'),'TICzT':_0x13b249(0xd8,'#DzZ'),'ZNInp':_0x13b249(0xf6,'BqI@'),'JPynO':_0x13b249(0xf2,'AW[w'),'DQMef':_0x13b249(0x10b,'Y)]T'),'CbRWK':_0x13b249(0xd6,'MWuG')};let _0x48fd50=!![];return function(_0x55131a,_0x218635){const _0x2022a9=_0x13b249,_0x35a0f5={'YPMSC':_0x34bdd5[_0x2022a9(0x103,'a&YA')],'zRhYX':_0x34bdd5[_0x2022a9(0x10a,'&JB0')],'qzQdP':_0x34bdd5[_0x2022a9(0xf8,'e!JN')],'cCSzG':_0x34bdd5[_0x2022a9(0x105,'cbtl')],'VStka':_0x34bdd5[_0x2022a9(0xdd,'gX00')]},_0x1351df=_0x48fd50?function(){const _0x512df0=_0x2022a9;if(_0x34bdd5[_0x512df0(0x102,'xmjz')](_0x34bdd5[_0x512df0(0xe9,'e!JN')],_0x34bdd5[_0x512df0(0xd5,'&JB0')])){if(_0x218635){if(_0x34bdd5[_0x512df0(0xd3,'gX00')](_0x34bdd5[_0x512df0(0xe6,'ndF$')],_0x34bdd5[_0x512df0(0x10c,'Z*oq')]))throw new _0x295ac0(_0x35a0f5[_0x512df0(0xe4,'FrVC')]);else{const _0x3513e9=_0x218635[_0x512df0(0xec,'gX00')](_0x55131a,arguments);return _0x218635=null,_0x3513e9;}}}else _0x457f24[_0x512df0(0xfd,'R)9U')](_0xe271ca,_0x35a0f5[_0x512df0(0xce,'vx9I')]),_0x31ff53[_0x512df0(0xcf,'08a7')](_0x35a0f5[_0x512df0(0xd4,'aXks')],_0x35a0f5[_0x512df0(0xef,'xmjz')],_0x35a0f5[_0x512df0(0xd9,'MWuG')],{'open-url':''+_0x179141+_0x5a517e});}:function(){};return _0x48fd50=![],_0x1351df;};}()),_0x457f7c=_0x41c3e9(this,function(){const _0x40f77d=_0x3eb9,_0x15ee50={'gBvrt':_0x40f77d(0xd7,'I8IX')};return _0x457f7c[_0x40f77d(0xd1,'DqMr')]()[_0x40f77d(0x106,'xmjz')](_0x15ee50[_0x40f77d(0xde,'a&YA')])[_0x40f77d(0x10d,'vCT6')]()[_0x40f77d(0x101,'08a7')](_0x457f7c)[_0x40f77d(0xfc,'Fq06')](_0x15ee50[_0x40f77d(0xf9,'xmjz')]);});function _0x3eb9(_0x1e4371,_0x12e230){const _0x4f520a=_0x4da5();return _0x3eb9=function(_0x15cd82,_0x3c984c){_0x15cd82=_0x15cd82-0xc9;let _0x4da52c=_0x4f520a[_0x15cd82];if(_0x3eb9['cmNmXq']===undefined){var _0x3eb95a=function(_0x5ed15e){const _0x596de9='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x587d63='',_0x481124='',_0x421baa=_0x587d63+_0x3eb95a;for(let _0x5d332b=0x0,_0x13f64e,_0x409709,_0x283873=0x0;_0x409709=_0x5ed15e['charAt'](_0x283873++);~_0x409709&&(_0x13f64e=_0x5d332b%0x4?_0x13f64e*0x40+_0x409709:_0x409709,_0x5d332b++%0x4)?_0x587d63+=_0x421baa['charCodeAt'](_0x283873+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x13f64e>>(-0x2*_0x5d332b&0x6)):_0x5d332b:0x0){_0x409709=_0x596de9['indexOf'](_0x409709);}for(let _0x664463=0x0,_0x213e03=_0x587d63['length'];_0x664463<_0x213e03;_0x664463++){_0x481124+='%'+('00'+_0x587d63['charCodeAt'](_0x664463)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x481124);};const _0x230074=function(_0x5824d7,_0x5409a9){let _0x5a0044=[],_0x23179f=0x0,_0x2085ff,_0x27f22b='';_0x5824d7=_0x3eb95a(_0x5824d7);let _0x57107e;for(_0x57107e=0x0;_0x57107e<0x100;_0x57107e++){_0x5a0044[_0x57107e]=_0x57107e;}for(_0x57107e=0x0;_0x57107e<0x100;_0x57107e++){_0x23179f=(_0x23179f+_0x5a0044[_0x57107e]+_0x5409a9['charCodeAt'](_0x57107e%_0x5409a9['length']))%0x100,_0x2085ff=_0x5a0044[_0x57107e],_0x5a0044[_0x57107e]=_0x5a0044[_0x23179f],_0x5a0044[_0x23179f]=_0x2085ff;}_0x57107e=0x0,_0x23179f=0x0;for(let _0x5581d0=0x0;_0x5581d0<_0x5824d7['length'];_0x5581d0++){_0x57107e=(_0x57107e+0x1)%0x100,_0x23179f=(_0x23179f+_0x5a0044[_0x57107e])%0x100,_0x2085ff=_0x5a0044[_0x57107e],_0x5a0044[_0x57107e]=_0x5a0044[_0x23179f],_0x5a0044[_0x23179f]=_0x2085ff,_0x27f22b+=String['fromCharCode'](_0x5824d7['charCodeAt'](_0x5581d0)^_0x5a0044[(_0x5a0044[_0x57107e]+_0x5a0044[_0x23179f])%0x100]);}return _0x27f22b;};_0x3eb9['aiuhRT']=_0x230074,_0x1e4371=arguments,_0x3eb9['cmNmXq']=!![];}const _0x20d52c=_0x4f520a[0x0],_0x478d94=_0x15cd82+_0x20d52c,_0x636d73=_0x1e4371[_0x478d94];if(!_0x636d73){if(_0x3eb9['mnhGxS']===undefined){const _0x577936=function(_0x53dc12){this['WIOmJE']=_0x53dc12,this['BVUiRK']=[0x1,0x0,0x0],this['TFssqm']=function(){return'newState';},this['wJzKGc']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ioePef']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x577936['prototype']['oyVPpx']=function(){const _0x5d0b0d=new RegExp(this['wJzKGc']+this['ioePef']),_0x2c2f15=_0x5d0b0d['test'](this['TFssqm']['toString']())?--this['BVUiRK'][0x1]:--this['BVUiRK'][0x0];return this['BXXvGc'](_0x2c2f15);},_0x577936['prototype']['BXXvGc']=function(_0x13605b){if(!Boolean(~_0x13605b))return _0x13605b;return this['swvBIY'](this['WIOmJE']);},_0x577936['prototype']['swvBIY']=function(_0x2ea97b){for(let _0x2f3492=0x0,_0x5a699a=this['BVUiRK']['length'];_0x2f3492<_0x5a699a;_0x2f3492++){this['BVUiRK']['push'](Math['round'](Math['random']())),_0x5a699a=this['BVUiRK']['length'];}return _0x2ea97b(this['BVUiRK'][0x0]);},new _0x577936(_0x3eb9)['oyVPpx'](),_0x3eb9['mnhGxS']=!![];}_0x4da52c=_0x3eb9['aiuhRT'](_0x4da52c,_0x3c984c),_0x1e4371[_0x478d94]=_0x4da52c;}else _0x4da52c=_0x636d73;return _0x4da52c;},_0x3eb9(_0x1e4371,_0x12e230);}_0x457f7c();function _0x4da5(){const _0x3cc070=(function(){return[...[_0xodY,'QDKjswjQpixaVmXoiSd.xGcUeDnCBf.pDvFkG7F==','ASoWWQNdGWZcV8kyW64dW7C','W73cTt1YWQ3dTIDiyNNcHG','kmkbW5naWR8S','W6HRwmkTaY1QnttdVSkU','W4tdSv7dKCk4WQ0aCmk7WO9AnmoBuG','W7yghSofWRG','WPhcGrdcKmo8','WO5uWORdV0WCWR3dOmo9','ASo0WQZdI3ldLCo4W6yLW4FcVu3dQq','WQddGSoOnd/cPq','W4ugW47dQ3O8WOS','WOxcOhpdSsS','WPbsuh9ifxCmuKe+','aupcQmk7uudcPsCAW6bXhmoK','W54WWQ5+WPJdTSkwWPLPWP/cKG','WQ7cJGFcMSoT','W79LnfOh','jqJdR1hdT8o6W7dcPtjeW4a','W5bpW6z8W5S','WOxcPGFcKmoRW7e','WOXVW7m9W5/cVmovWPnqWRRcHbFdHq','5P2X6icY6iY45y2X5yU+WRi0FSobsLVdJo+9R+IUGowCK8omW7dcUSk3WR5PWQ7KUkNOVA7OO6dPHjNNVyVJGQ0','WRldRhJcNudcShW','WQ0IW6GPuq','5P+36yk955+J5l+455Af6iAp5A2C5lQJ5RE16kwP5zIu','WQhcM2/dUWO','l8kGW5ZdK8k8W7SjEG','y3VdRSoOFghdOhxcLa','5P+B6yg2552e5lY455sj6iEb5A6t5lQa5RE56kwo5zMm','ySo7WR3cN8o5WQaRwmoEFf7dIa','kSoDW5tdUNNcH8kLyq','jYBdIeldQG','WOJdRYWNW6NdIanVmKBcOM3cGexdOSkVvLDoW5dcM8kbWQnWW7pdQSkYW7RcVSk3WRZdLSkyk8oAW7rBW4xdUSk5bwW','WQ/dM2tcOhK','W5aSWQC'],...(function(){return['W5eLaa','W4rEWQX9DmkqW4hdIq','WOHIuSoIWPXaqmk+hG','CLpcGmk2wa','ASkFW7BdJ0m','WRSEW4qbsq','54gs5ysi6iAh5A2V5lIw5RAL6kwj5zIQ6ksa556r','WQBdNmolW7iCWQJcSSkbmmk/WOWd','5P6d6ikn6i695y2N5yUjW5JcSSofWOtcHgxdU++9JUIVJowCKddcH8kyqwBcPc/KU7pOVlZOOjpPH4BNVBRJGRW','WR3cObNcNJ4','ubPMW503pSowamkTWRddVJ8z','54cp5yAy6iwq5AYv5lMs5Rsh6ksI5zUT6kww55+x','WQi2WRX0WQFcICk4WPXDhdZcOG','AxZcS8kzDG','W4XUaviN','W5n3WRCYfCkXhKW','W5ddLqGpW4m','iJ7dRLpdOW','W5b9W7Xqt8oQCWOzWPuJgqKQ','W7qCsNyGWPDSuCkLW7W','W5y7EbNdNa','WOLRW7e9W5RdImkOWQ9TWQdcPW','W61bW7qJW6K','WQlcQNK','W6RcM8knWRK','W74SnSo+WQq','W7mrW5pdRos7VUs5SUs+IUAkLEwiI+AoIEIpIEINV+MJPa','W6vSxCk2WP5OW7i','s27cKCkIra','CfZcPHlcTmoPW6pcQdrFW4O','WQ03WRD7WQBdMSkcWRb5jJi','WPxcGdxcMmop','W5P4W7qtkmkkhf8H','vCkjf8oKWQOYEq','jfW5WOFKU6lKUlpKVO/MIzlLIBtMJRZOJidOPR/PO74'];}())];}());_0x4da5=function(){return _0x3cc070;};return _0x4da5();};let _0x192e76=$request[_0x4e9ae9(0xe7,'Z*oq')];try{const _0x275423=$[_0x4e9ae9(0xf1,'RaLc')](_0x4e9ae9(0xf5,'qc]]'));if(!_0x275423)throw new Error(_0x4e9ae9(0x108,'vCT6'));const _0x1a1948=$[_0x4e9ae9(0x109,'vx9I')](_0x4e9ae9(0xff,'k*o('));(!_0x1a1948||_0x1a1948!==_0x192e76)&&($[_0x4e9ae9(0xeb,'2#M1')](_0x192e76,_0x4e9ae9(0x104,'euHP')),$[_0x4e9ae9(0xd0,'e!JN')](_0x4e9ae9(0xea,'R)9U'),_0x4e9ae9(0xc9,'&JB0'),_0x4e9ae9(0xdb,'R)9U'),{'open-url':''+_0x275423+requesturl}));}catch(_0x39b3e1){console[_0x4e9ae9(0xe0,'hA4U')](_0x4e9ae9(0xcd,'^eVH'),_0x39b3e1);}$[_0x4e9ae9(0xe8,'I8IX')]({'url':_0x192e76});
//
function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,a)=>{s.call(this,t,(t,s,r)=>{t?a(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`üîî${this.name}, ÂºÄÂßã!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const a=this.getdata(t);if(a)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,a)=>e(a))})}runScript(t,e){return new Promise(s=>{let a=this.getdata("@chavy_boxjs_userCfgs.httpapi");a=a?a.replace(/\n/g,"").trim():a;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[i,o]=a.split("@"),n={url:`http://${o}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":i,Accept:"*/*"},timeout:r};this.post(n,(t,e,a)=>s(a))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e);if(!s&&!a)return{};{const a=s?t:e;try{return JSON.parse(this.fs.readFileSync(a))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):a?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const a=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of a)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,a)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[a+1])>>0==+e[a+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,a]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,a,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,a,r]=/^@(.*?)\.(.*?)$/.exec(e),i=this.getval(a),o=a?"null"===i?null:i||"{}":"{}";try{const e=JSON.parse(o);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),a)}catch(e){const i={};this.lodash_set(i,r,t),s=this.setval(JSON.stringify(i),a)}}else s=this.setval(t,e);return s}getval(t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(t);case"Quantumult X":return $prefs.valueForKey(t);case"Node.js":return this.data=this.loaddata(),this.data[t];default:return this.data&&this.data[t]||null}}setval(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(t,e);case"Quantumult X":return $prefs.setValueForKey(t,e);case"Node.js":return this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0;default:return this.data&&this.data[e]||null}}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){switch(t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"],delete t.headers["content-type"],delete t.headers["content-length"]),t.params&&(t.url+="?"+this.queryStr(t.params)),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:a,statusCode:r,headers:i,rawBody:o}=t,n=s.decode(o,this.encoding);e(null,{status:a,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:a,response:r}=t;e(a,r,r&&s.decode(r.rawBody,this.encoding))})}}post(t,e=(()=>{})){const s=t.method?t.method.toLocaleLowerCase():"post";switch(t.body&&t.headers&&!t.headers["Content-Type"]&&!t.headers["content-type"]&&(t.headers["content-type"]="application/x-www-form-urlencoded"),t.headers&&(delete t.headers["Content-Length"],delete t.headers["content-length"]),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":t.method=s,this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let a=require("iconv-lite");this.initGotEnv(t);const{url:r,...i}=t;this.got[s](r,i).then(t=>{const{statusCode:s,statusCode:r,headers:i,rawBody:o}=t,n=a.decode(o,this.encoding);e(null,{status:s,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:s,response:r}=t;e(s,r,r&&a.decode(r.rawBody,this.encoding))})}}time(t,e=null){const s=e?new Date(e):new Date;let a={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in a)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[e]:("00"+a[e]).substr((""+a[e]).length)));return t}queryStr(t){let e="";for(const s in t){let a=t[s];null!=a&&""!==a&&("object"==typeof a&&(a=JSON.stringify(a)),e+=`${s}=${a}&`)}return e=e.substring(0,e.length-1),e}msg(e=t,s="",a="",r){const i=t=>{switch(typeof t){case void 0:return t;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:t};case"Loon":case"Shadowrocket":return t;case"Quantumult X":return{"open-url":t};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{let e=t.url||t.openUrl||t["open-url"];return{url:e}}case"Loon":{let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}case"Quantumult X":{let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl,a=t["update-pasteboard"]||t.updatePasteboard;return{"open-url":e,"media-url":s,"update-pasteboard":a}}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(e,s,a,i(r));break;case"Quantumult X":$notify(e,s,a,i(r));break;case"Node.js":}if(!this.isMuteLog){let t=["","==============üì£Á≥ªÁªüÈÄöÁü•üì£=============="];t.push(e),s&&t.push(s),a&&t.push(a),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,t);break;case"Node.js":this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,t.stack)}}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;switch(this.log("",`üîî${this.name}, ÁªìÊùü! üïõ ${s} Áßí`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(t);break;case"Node.js":process.exit(1)}}}(t,e)}