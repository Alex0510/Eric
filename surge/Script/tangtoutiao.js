var _0xod2='jsjiami.cn.v7';const _0x2c5571=_0x2c1e;(function(_0x15683a,_0x1be2bf,_0x1f8a02,_0x412f45,_0x169024,_0x370939,_0x2547bc){return _0x15683a=_0x15683a>>0x2,_0x370939='hs',_0x2547bc='hs',function(_0x49fa9f,_0x7ceeca,_0x30abf4,_0x40bf86,_0x49ea5a){const _0x15a6eb=_0x2c1e;_0x40bf86='tfi',_0x370939=_0x40bf86+_0x370939,_0x49ea5a='up',_0x2547bc+=_0x49ea5a,_0x370939=_0x30abf4(_0x370939),_0x2547bc=_0x30abf4(_0x2547bc),_0x30abf4=0x0;const _0xd1382a=_0x49fa9f();while(!![]&&--_0x412f45+_0x7ceeca){try{_0x40bf86=parseInt(_0x15a6eb(0x175,'O6qI'))/0x1+-parseInt(_0x15a6eb(0x18e,'p@pl'))/0x2+parseInt(_0x15a6eb(0x193,'(URk'))/0x3+-parseInt(_0x15a6eb(0x178,'Fnm^'))/0x4+-parseInt(_0x15a6eb(0x1a8,'OT5J'))/0x5+parseInt(_0x15a6eb(0x19c,'7mbL'))/0x6+parseInt(_0x15a6eb(0x17c,'JU6T'))/0x7;}catch(_0x4db895){_0x40bf86=_0x30abf4;}finally{_0x49ea5a=_0xd1382a[_0x370939]();if(_0x15683a<=_0x412f45)_0x30abf4?_0x169024?_0x40bf86=_0x49ea5a:_0x169024=_0x49ea5a:_0x30abf4=_0x49ea5a;else{if(_0x30abf4==_0x169024['replace'](/[CyqhExguRkoDBIwOGe=]/g,'')){if(_0x40bf86===_0x7ceeca){_0xd1382a['un'+_0x370939](_0x49ea5a);break;}_0xd1382a[_0x2547bc](_0x49ea5a);}}}}}(_0x1f8a02,_0x1be2bf,function(_0x431f91,_0x5c6075,_0x3a9545,_0x2888ca,_0x1d5f7d,_0x55bca5,_0x5c3b96){return _0x5c6075='\x73\x70\x6c\x69\x74',_0x431f91=arguments[0x0],_0x431f91=_0x431f91[_0x5c6075](''),_0x3a9545=`\x72\x65\x76\x65\x72\x73\x65`,_0x431f91=_0x431f91[_0x3a9545]('\x76'),_0x2888ca=`\x6a\x6f\x69\x6e`,(0x1858e1,_0x431f91[_0x2888ca](''));});}(0x314,0x7f1eb,_0x5ebb,0xc7),_0x5ebb)&&(_0xod2=`\xe68`);const _0x551272=(function(){const _0x5e91e=_0x2c1e,_0x50a89a={'KDhpK':_0x5e91e(0x196,'O6qI'),'uUzXS':function(_0x574b46,_0x2ae03a){return _0x574b46(_0x2ae03a);},'ubsPM':function(_0x5de80e,_0xdecf39){return _0x5de80e===_0xdecf39;},'RgOmi':_0x5e91e(0x17f,'u1rq'),'mfGyT':_0x5e91e(0x19e,'H6UG'),'UWFCQ':_0x5e91e(0x19f,'Z6GI')};let _0x21530c=!![];return function(_0x306f09,_0x5c2946){const _0x4ae3f0=_0x5e91e,_0x116d72={'xUzyC':_0x50a89a[_0x4ae3f0(0x176,'u1rq')],'PvbPB':function(_0x207d61,_0xaebf5a){const _0x111e40=_0x4ae3f0;return _0x50a89a[_0x111e40(0x1ae,'Yxss')](_0x207d61,_0xaebf5a);},'hMrVo':function(_0x30fd73,_0x2dd1ef){const _0x42745e=_0x4ae3f0;return _0x50a89a[_0x42745e(0x17a,'R3s(')](_0x30fd73,_0x2dd1ef);},'fcalL':_0x50a89a[_0x4ae3f0(0x17e,'*sT6')],'eBfCQ':_0x50a89a[_0x4ae3f0(0x173,'Xt8V')],'Lqori':function(_0x3cb8ba,_0x42a45f){const _0x1909ef=_0x4ae3f0;return _0x50a89a[_0x1909ef(0x1ad,'Z9]p')](_0x3cb8ba,_0x42a45f);},'UiBuL':_0x50a89a[_0x4ae3f0(0x1a0,'51&1')]},_0x216b0c=_0x21530c?function(){const _0x436e72=_0x4ae3f0,_0x2c631d={'CDCEH':function(_0x250be3,_0x2b5e90){const _0x57e467=_0x2c1e;return _0x116d72[_0x57e467(0x1a2,'xI[u')](_0x250be3,_0x2b5e90);}};if(_0x116d72[_0x436e72(0x1a5,'MDZn')](_0x116d72[_0x436e72(0x180,'lYZx')],_0x116d72[_0x436e72(0x19b,'Bt(^')]))throw new _0x175acd(_0x116d72[_0x436e72(0x1b5,'*sT6')]);else{if(_0x5c2946){if(_0x116d72[_0x436e72(0x179,'O2O[')](_0x116d72[_0x436e72(0x18f,'O2O[')],_0x116d72[_0x436e72(0x195,'^&E^')])){const _0x30a953=_0x5c2946[_0x436e72(0x191,'lYZx')](_0x306f09,arguments);return _0x5c2946=null,_0x30a953;}else _0x10a93e=_0x436e72(0x190,'XCsF')+_0x2c631d[_0x436e72(0x1a7,'Ks][')](_0x25ea8d,_0x2e20f1);}}}:function(){};return _0x21530c=![],_0x216b0c;};}()),_0x590cff=_0x551272(this,function(){const _0x2e56a9=_0x2c1e,_0x4d605f={'SkYDC':_0x2e56a9(0x189,'OT5J')};return _0x590cff[_0x2e56a9(0x18a,'u1rq')]()[_0x2e56a9(0x182,'Bt(^')](_0x4d605f[_0x2e56a9(0x177,'EzDv')])[_0x2e56a9(0x184,'Y&SZ')]()[_0x2e56a9(0x18b,'O2O[')](_0x590cff)[_0x2e56a9(0x19a,'JeOD')](_0x4d605f[_0x2e56a9(0x1b3,'d2UR')]);});_0x590cff();const _0x29948f=new Env(_0x2c5571(0x174,'e5uo'));function _0x2c1e(_0x5563b3,_0x1ece38){const _0x5a3de3=_0x5ebb();return _0x2c1e=function(_0x3bf22e,_0x52f816){_0x3bf22e=_0x3bf22e-0x172;let _0x5ebb7d=_0x5a3de3[_0x3bf22e];if(_0x2c1e['HEJyfa']===undefined){var _0x2c1e47=function(_0x3f9185){const _0x2cb1e6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5048a8='',_0x1fe0b8='',_0xfba850=_0x5048a8+_0x2c1e47;for(let _0x5d76d6=0x0,_0x2f560a,_0x4dc851,_0x2d28e3=0x0;_0x4dc851=_0x3f9185['charAt'](_0x2d28e3++);~_0x4dc851&&(_0x2f560a=_0x5d76d6%0x4?_0x2f560a*0x40+_0x4dc851:_0x4dc851,_0x5d76d6++%0x4)?_0x5048a8+=_0xfba850['charCodeAt'](_0x2d28e3+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x2f560a>>(-0x2*_0x5d76d6&0x6)):_0x5d76d6:0x0){_0x4dc851=_0x2cb1e6['indexOf'](_0x4dc851);}for(let _0x2b208c=0x0,_0xb914ba=_0x5048a8['length'];_0x2b208c<_0xb914ba;_0x2b208c++){_0x1fe0b8+='%'+('00'+_0x5048a8['charCodeAt'](_0x2b208c)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1fe0b8);};const _0xbebd59=function(_0x10ebd5,_0x40c746){let _0x51943d=[],_0x20db03=0x0,_0x5754e3,_0x27b923='';_0x10ebd5=_0x2c1e47(_0x10ebd5);let _0x3da3cd;for(_0x3da3cd=0x0;_0x3da3cd<0x100;_0x3da3cd++){_0x51943d[_0x3da3cd]=_0x3da3cd;}for(_0x3da3cd=0x0;_0x3da3cd<0x100;_0x3da3cd++){_0x20db03=(_0x20db03+_0x51943d[_0x3da3cd]+_0x40c746['charCodeAt'](_0x3da3cd%_0x40c746['length']))%0x100,_0x5754e3=_0x51943d[_0x3da3cd],_0x51943d[_0x3da3cd]=_0x51943d[_0x20db03],_0x51943d[_0x20db03]=_0x5754e3;}_0x3da3cd=0x0,_0x20db03=0x0;for(let _0x3c7343=0x0;_0x3c7343<_0x10ebd5['length'];_0x3c7343++){_0x3da3cd=(_0x3da3cd+0x1)%0x100,_0x20db03=(_0x20db03+_0x51943d[_0x3da3cd])%0x100,_0x5754e3=_0x51943d[_0x3da3cd],_0x51943d[_0x3da3cd]=_0x51943d[_0x20db03],_0x51943d[_0x20db03]=_0x5754e3,_0x27b923+=String['fromCharCode'](_0x10ebd5['charCodeAt'](_0x3c7343)^_0x51943d[(_0x51943d[_0x3da3cd]+_0x51943d[_0x20db03])%0x100]);}return _0x27b923;};_0x2c1e['xHSYDt']=_0xbebd59,_0x5563b3=arguments,_0x2c1e['HEJyfa']=!![];}const _0x3a0244=_0x5a3de3[0x0],_0x3eaa81=_0x3bf22e+_0x3a0244,_0x2df806=_0x5563b3[_0x3eaa81];if(!_0x2df806){if(_0x2c1e['oTFBoj']===undefined){const _0x3b8ae3=function(_0x624e90){this['UJTAoF']=_0x624e90,this['dZoTAY']=[0x1,0x0,0x0],this['UxdeoI']=function(){return'newState';},this['ecFznG']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ZsrCgK']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3b8ae3['prototype']['aUAquD']=function(){const _0x417514=new RegExp(this['ecFznG']+this['ZsrCgK']),_0x12c0de=_0x417514['test'](this['UxdeoI']['toString']())?--this['dZoTAY'][0x1]:--this['dZoTAY'][0x0];return this['trnXDm'](_0x12c0de);},_0x3b8ae3['prototype']['trnXDm']=function(_0x127769){if(!Boolean(~_0x127769))return _0x127769;return this['RoxjGL'](this['UJTAoF']);},_0x3b8ae3['prototype']['RoxjGL']=function(_0x32cf5d){for(let _0x445b72=0x0,_0x45ac57=this['dZoTAY']['length'];_0x445b72<_0x45ac57;_0x445b72++){this['dZoTAY']['push'](Math['round'](Math['random']())),_0x45ac57=this['dZoTAY']['length'];}return _0x32cf5d(this['dZoTAY'][0x0]);},new _0x3b8ae3(_0x2c1e)['aUAquD'](),_0x2c1e['oTFBoj']=!![];}_0x5ebb7d=_0x2c1e['xHSYDt'](_0x5ebb7d,_0x52f816),_0x5563b3[_0x3eaa81]=_0x5ebb7d;}else _0x5ebb7d=_0x2df806;return _0x5ebb7d;},_0x2c1e(_0x5563b3,_0x1ece38);}let _0x3aba30=$request[_0x2c5571(0x1ac,'H7XA')];_0x3aba30=_0x3aba30[_0x2c5571(0x1a1,'&3(0')](/\w*play/g,_0x2c5571(0x185,'Fnm^'));function _0x5ebb(){const _0x3983fc=(function(){return['_0xod2','OqyjCDskGjIIiwIGahxmEkieR.uBcnR.oyvk7gw==','W6ZdLWpcM8ooW4RcMfhdQSkQW7SIoW','W65Wi2RdHSkzi8oJWRxdL8k7WO/cRG','W5LqbHhdUCkLAq','imosFCocoW','BCkrW4xcKfa','Dw/cKZVdUW','q8kiWQ3dL8oZgmoOW5n/W5JcJCo9yG','ofr1mbLB','54o/5ywj6iEC5AYl5lM85RwK6kA55zQe6kAC5566','bmouW4RcMSkYrSkYW4i','WRPxWQpdOa','rhVcK8kiWP3cQ8oyWRldJSk0DuBcNG','5P276ycI552p5l+K55EB6iAI5A2z5lMy5Rwf6kA85zIs','lMpcNSoqW6ZcSv9et8oKpbtdVa','pmoVWOxdRYxdImk6WQxdRSoGdbS','vSkpW7VcVetcJSk6WOe','p3BdLWVcOCo9WO3dTIhdQCk7','W67dJeu','hM/dR8o0kWOjW4xdSG','W6/dKaRcKSooW4/cMKpdJ8kaW44tja','cxddUW3cMq','xCoeWQyAW5GDwSojpcehnv83W6dcR3nVWP5WW49OWRldPmozW6n/WORdRSkhrKNdNSk2W44j','CNZcGJVdJG','emoih8kswbjJq8kQeJ1qeW','ewVdN8ogW6KtW6H/tCk/W6zTW60','r8ksW5RcP0q','tLDIv1W','6kYR6ykk5OUG6Ak26k+V5RAX6kE65zUj5OIE6iAU5A+T5lIZvalcK8kwWRuVW7RVV7VKU5BOGO3LKzdMLjZPG7BMIl3KU5xOGANVVyq','6k6w6yoG5OUA6Agu6kYE5REv6kEz5zMx5OI26is95A2p5lUWWP/cPCozW4lcIf7cME+8VUs5NUIbTEwtJUAvQ+MaI+AjVos6JoIbQ++8IW','mCkKWPxdHSo1W6Wp','hINdG8oTtfxdSdTsWROk','pSogWQ3cKmo/W70','lNnYasS','qx/cNSkoWPJcPSoAWPNdMCkqE0dcIq','gLZcVqhcV1C','nCkTvmk/W7K','s8kjA8olpG','W4VcHSkcDMm','W7zytmoHymkLWOu','WOtcLqJcM8o2','q37cNmkaWP/cQ8kpWOZdGCkVDgC','zJBcLG','uZKHW4/dKW','5PYj6ygt5OIh5lIe5l6k5RwT6ksu5zMIpSkTW7nWW65mdU+9H+IVR+McREAkLos4NUs4Q+MbTUMJIUAiN+IeH+wVJEs7JUI9GEweHE+/Ha','fhZdQCoEWRS','jCo2WPxdUt3dMmkKW6tcJSktrLxdHa','fs7dJq','WRxdRwPEjmkAv8os','aSkiq8kKW5xdQhrBDCkLWRK','W7SfW4a','WQ/cRmoAEJm','W53dKmkcWRDW','W4fpvCoU5lI75l6M5OUW5yM95O246i2n6kwX6Ak1','bCkgxCk1','uCkdW4dcRvVcGG','s2RcMxi/WQW9rmkub8oqWO9R','W4ddL8oomtG','W6ZdQSk1WO/dGMpcUa','cSoGsmoweq','jCohrCoLwKyIWO82W5rwdq','5O+g6iYlWRCGkCk0W4NMLBlLHQhNJOtPLPZOR7uh','CJtdOCkrWOS','sLZdSaZKU5hKVA/MJAJKVAlMNO3LI5u','W6RcSd4kzCoku8o4Ctq1hW','ACkKW4dcUh0','eCkQWRJdPSox','W6upW77cS8kzWPvKzKldGx1yWRm','egJdLGRcVa','pf/cQddcGa'];}());_0x5ebb=function(){return _0x3983fc;};return _0x5ebb();};try{const _0x378aee=_0x29948f[_0x2c5571(0x1b4,'&vD5')](_0x2c5571(0x1b1,'u1rq')),_0xbf98c1=_0x29948f[_0x2c5571(0x1b4,'&vD5')](_0x2c5571(0x1b6,'ky3Q'));if(_0x378aee&&_0xbf98c1)throw new Error(_0x2c5571(0x197,'H6UG'));let _0x15060a=_0x378aee||_0xbf98c1;if(!_0x15060a)throw new Error(_0x2c5571(0x1a6,'(URk'));const _0x5c4a3b=_0x29948f[_0x2c5571(0x17d,'vBS8')](_0x2c5571(0x1ab,'H6UG'));if(!_0x5c4a3b||_0x5c4a3b!==_0x3aba30){_0x29948f[_0x2c5571(0x198,'EzDv')](_0x3aba30,_0x2c5571(0x199,'xork'));let _0x13e06;if(_0x15060a===_0x2c5571(0x18d,'8XAB'))_0x13e06=_0x2c5571(0x190,'XCsF')+encodeURIComponent(_0x3aba30);else _0x15060a===_0x2c5571(0x19d,'R3s(')?_0x13e06=_0x3aba30:_0x13e06=_0x15060a[_0x2c5571(0x1aa,'O6qI')](_0x2c5571(0x1a4,'O2O['))?''+_0x15060a+_0x3aba30:_0x15060a+_0x2c5571(0x18c,'xI[u')+_0x3aba30;_0x29948f[_0x2c5571(0x1a9,'7mN8')](_0x2c5571(0x1af,'&3(0'),_0x2c5571(0x187,'Ks]['),_0x2c5571(0x183,'ky3Q'),{'open-url':_0x13e06});}}catch(_0x53d3e6){console[_0x2c5571(0x194,'u1rq')](_0x2c5571(0x172,'d2UR'),_0x53d3e6);}_0x29948f[_0x2c5571(0x1b0,'H6UG')]({'url':_0x3aba30});
//
function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,a)=>{s.call(this,t,(t,s,r)=>{t?a(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`üîî${this.name}, ÂºÄÂßã!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const a=this.getdata(t);if(a)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,a)=>e(a))})}runScript(t,e){return new Promise(s=>{let a=this.getdata("@chavy_boxjs_userCfgs.httpapi");a=a?a.replace(/\n/g,"").trim():a;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[i,o]=a.split("@"),n={url:`http://${o}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":i,Accept:"*/*"},timeout:r};this.post(n,(t,e,a)=>s(a))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e);if(!s&&!a)return{};{const a=s?t:e;try{return JSON.parse(this.fs.readFileSync(a))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):a?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const a=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of a)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,a)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[a+1])>>0==+e[a+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,a]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,a,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,a,r]=/^@(.*?)\.(.*?)$/.exec(e),i=this.getval(a),o=a?"null"===i?null:i||"{}":"{}";try{const e=JSON.parse(o);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),a)}catch(e){const i={};this.lodash_set(i,r,t),s=this.setval(JSON.stringify(i),a)}}else s=this.setval(t,e);return s}getval(t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(t);case"Quantumult X":return $prefs.valueForKey(t);case"Node.js":return this.data=this.loaddata(),this.data[t];default:return this.data&&this.data[t]||null}}setval(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(t,e);case"Quantumult X":return $prefs.setValueForKey(t,e);case"Node.js":return this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0;default:return this.data&&this.data[e]||null}}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){switch(t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"],delete t.headers["content-type"],delete t.headers["content-length"]),t.params&&(t.url+="?"+this.queryStr(t.params)),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:a,statusCode:r,headers:i,rawBody:o}=t,n=s.decode(o,this.encoding);e(null,{status:a,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:a,response:r}=t;e(a,r,r&&s.decode(r.rawBody,this.encoding))})}}post(t,e=(()=>{})){const s=t.method?t.method.toLocaleLowerCase():"post";switch(t.body&&t.headers&&!t.headers["Content-Type"]&&!t.headers["content-type"]&&(t.headers["content-type"]="application/x-www-form-urlencoded"),t.headers&&(delete t.headers["Content-Length"],delete t.headers["content-length"]),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":t.method=s,this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let a=require("iconv-lite");this.initGotEnv(t);const{url:r,...i}=t;this.got[s](r,i).then(t=>{const{statusCode:s,statusCode:r,headers:i,rawBody:o}=t,n=a.decode(o,this.encoding);e(null,{status:s,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:s,response:r}=t;e(s,r,r&&a.decode(r.rawBody,this.encoding))})}}time(t,e=null){const s=e?new Date(e):new Date;let a={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in a)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[e]:("00"+a[e]).substr((""+a[e]).length)));return t}queryStr(t){let e="";for(const s in t){let a=t[s];null!=a&&""!==a&&("object"==typeof a&&(a=JSON.stringify(a)),e+=`${s}=${a}&`)}return e=e.substring(0,e.length-1),e}msg(e=t,s="",a="",r){const i=t=>{switch(typeof t){case void 0:return t;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:t};case"Loon":case"Shadowrocket":return t;case"Quantumult X":return{"open-url":t};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{let e=t.url||t.openUrl||t["open-url"];return{url:e}}case"Loon":{let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}case"Quantumult X":{let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl,a=t["update-pasteboard"]||t.updatePasteboard;return{"open-url":e,"media-url":s,"update-pasteboard":a}}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(e,s,a,i(r));break;case"Quantumult X":$notify(e,s,a,i(r));break;case"Node.js":}if(!this.isMuteLog){let t=["","==============üì£Á≥ªÁªüÈÄöÁü•üì£=============="];t.push(e),s&&t.push(s),a&&t.push(a),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,t);break;case"Node.js":this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,t.stack)}}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;switch(this.log("",`üîî${this.name}, ÁªìÊùü! üïõ ${s} Áßí`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(t);break;case"Node.js":process.exit(1)}}}(t,e)}