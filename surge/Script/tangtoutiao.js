var _0xodM='jsjiami.cn.v7';const _0x299592=_0x55d0;(function(_0xd6b720,_0x401e93,_0x307446,_0x49ff69,_0x17edcd,_0x2cd7d7,_0x47f25e){return _0xd6b720=_0xd6b720>>0x8,_0x2cd7d7='hs',_0x47f25e='hs',function(_0x4cdbd6,_0x381010,_0x111294,_0x19d240,_0x3f90d2){const _0xe66e15=_0x55d0;_0x19d240='tfi',_0x2cd7d7=_0x19d240+_0x2cd7d7,_0x3f90d2='up',_0x47f25e+=_0x3f90d2,_0x2cd7d7=_0x111294(_0x2cd7d7),_0x47f25e=_0x111294(_0x47f25e),_0x111294=0x0;const _0x52fc91=_0x4cdbd6();while(!![]&&--_0x49ff69+_0x381010){try{_0x19d240=parseInt(_0xe66e15(0x121,'qtm%'))/0x1+parseInt(_0xe66e15(0x104,'!Ybj'))/0x2*(parseInt(_0xe66e15(0xf9,'!Ybj'))/0x3)+parseInt(_0xe66e15(0xf3,'3RpS'))/0x4+parseInt(_0xe66e15(0x10f,'dgex'))/0x5+parseInt(_0xe66e15(0xf7,'SZzf'))/0x6+parseInt(_0xe66e15(0x123,'@#*o'))/0x7*(parseInt(_0xe66e15(0x102,'yj]o'))/0x8)+-parseInt(_0xe66e15(0x107,'CdHC'))/0x9;}catch(_0x2d9eb1){_0x19d240=_0x111294;}finally{_0x3f90d2=_0x52fc91[_0x2cd7d7]();if(_0xd6b720<=_0x49ff69)_0x111294?_0x17edcd?_0x19d240=_0x3f90d2:_0x17edcd=_0x3f90d2:_0x111294=_0x3f90d2;else{if(_0x111294==_0x17edcd['replace'](/[SguxWAPEVbHdpDhOBteLF=]/g,'')){if(_0x19d240===_0x381010){_0x52fc91['un'+_0x2cd7d7](_0x3f90d2);break;}_0x52fc91[_0x47f25e](_0x3f90d2);}}}}}(_0x307446,_0x401e93,function(_0x241ff7,_0x240382,_0x2f4507,_0x35285c,_0x520ad4,_0x1779e0,_0x5d0860){return _0x240382='\x73\x70\x6c\x69\x74',_0x241ff7=arguments[0x0],_0x241ff7=_0x241ff7[_0x240382](''),_0x2f4507=`\x72\x65\x76\x65\x72\x73\x65`,_0x241ff7=_0x241ff7[_0x2f4507]('\x76'),_0x35285c=`\x6a\x6f\x69\x6e`,(0x1858c3,_0x241ff7[_0x35285c](''));});}(0xc600,0x2a5f3,_0x244b,0xc8),_0x244b)&&(_0xodM=0xc8);const _0x33e8dd=(function(){const _0x318206=_0x55d0,_0x259b0d={'AwXuM':function(_0x469b1a,_0x62234b){return _0x469b1a===_0x62234b;},'bEvVM':_0x318206(0xf2,'@#*o'),'IvJPK':_0x318206(0xef,'9NRf')};let _0x33ab39=!![];return function(_0x3473c3,_0x1e06d9){const _0x159383=_0x318206,_0x171cc4={'umNft':function(_0x4ac6ca,_0x28f02c){const _0x34a596=_0x55d0;return _0x259b0d[_0x34a596(0xfb,'!dk6')](_0x4ac6ca,_0x28f02c);},'lSGte':_0x259b0d[_0x159383(0x122,'yVPG')],'TSvRR':_0x259b0d[_0x159383(0x109,'lf5Y')]},_0x1362ab=_0x33ab39?function(){const _0x3f8101=_0x159383;if(_0x171cc4[_0x3f8101(0x124,'Nd7j')](_0x171cc4[_0x3f8101(0x10e,'Nd7j')],_0x171cc4[_0x3f8101(0x105,'i8aZ')])){if(_0x16c877){const _0x27a6da=_0x4a7f07[_0x3f8101(0xee,'s3q&')](_0x41a548,arguments);return _0x5dcbd1=null,_0x27a6da;}}else{if(_0x1e06d9){const _0x405f63=_0x1e06d9[_0x3f8101(0x116,'(OnQ')](_0x3473c3,arguments);return _0x1e06d9=null,_0x405f63;}}}:function(){};return _0x33ab39=![],_0x1362ab;};}()),_0xa9fd15=_0x33e8dd(this,function(){const _0x146b8a=_0x55d0,_0x8df232={'SosrH':_0x146b8a(0x10c,'HXDi')};return _0xa9fd15[_0x146b8a(0x115,'3RpS')]()[_0x146b8a(0x11b,'g]Xt')](_0x8df232[_0x146b8a(0x11d,'(OnQ')])[_0x146b8a(0x101,'Nd7j')]()[_0x146b8a(0xed,'@#*o')](_0xa9fd15)[_0x146b8a(0x127,'4MjM')](_0x8df232[_0x146b8a(0x106,'HXDi')]);});_0xa9fd15();function _0x55d0(_0x4f8158,_0x528b99){const _0x4e9118=_0x244b();return _0x55d0=function(_0x11eecd,_0x4250a2){_0x11eecd=_0x11eecd-0xea;let _0x244be4=_0x4e9118[_0x11eecd];if(_0x55d0['oZoCxL']===undefined){var _0x55d075=function(_0x3ea2c6){const _0x56ee95='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5461a6='',_0x3947bd='',_0x44836f=_0x5461a6+_0x55d075;for(let _0x103a61=0x0,_0x34cfba,_0x43d5c6,_0xfa131f=0x0;_0x43d5c6=_0x3ea2c6['charAt'](_0xfa131f++);~_0x43d5c6&&(_0x34cfba=_0x103a61%0x4?_0x34cfba*0x40+_0x43d5c6:_0x43d5c6,_0x103a61++%0x4)?_0x5461a6+=_0x44836f['charCodeAt'](_0xfa131f+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x34cfba>>(-0x2*_0x103a61&0x6)):_0x103a61:0x0){_0x43d5c6=_0x56ee95['indexOf'](_0x43d5c6);}for(let _0x38fe64=0x0,_0x25051a=_0x5461a6['length'];_0x38fe64<_0x25051a;_0x38fe64++){_0x3947bd+='%'+('00'+_0x5461a6['charCodeAt'](_0x38fe64)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3947bd);};const _0x3dc9b3=function(_0x151d66,_0x12ca38){let _0x4cbac0=[],_0x54a9da=0x0,_0x2a8c3d,_0x264e20='';_0x151d66=_0x55d075(_0x151d66);let _0x2b98e3;for(_0x2b98e3=0x0;_0x2b98e3<0x100;_0x2b98e3++){_0x4cbac0[_0x2b98e3]=_0x2b98e3;}for(_0x2b98e3=0x0;_0x2b98e3<0x100;_0x2b98e3++){_0x54a9da=(_0x54a9da+_0x4cbac0[_0x2b98e3]+_0x12ca38['charCodeAt'](_0x2b98e3%_0x12ca38['length']))%0x100,_0x2a8c3d=_0x4cbac0[_0x2b98e3],_0x4cbac0[_0x2b98e3]=_0x4cbac0[_0x54a9da],_0x4cbac0[_0x54a9da]=_0x2a8c3d;}_0x2b98e3=0x0,_0x54a9da=0x0;for(let _0x4bd647=0x0;_0x4bd647<_0x151d66['length'];_0x4bd647++){_0x2b98e3=(_0x2b98e3+0x1)%0x100,_0x54a9da=(_0x54a9da+_0x4cbac0[_0x2b98e3])%0x100,_0x2a8c3d=_0x4cbac0[_0x2b98e3],_0x4cbac0[_0x2b98e3]=_0x4cbac0[_0x54a9da],_0x4cbac0[_0x54a9da]=_0x2a8c3d,_0x264e20+=String['fromCharCode'](_0x151d66['charCodeAt'](_0x4bd647)^_0x4cbac0[(_0x4cbac0[_0x2b98e3]+_0x4cbac0[_0x54a9da])%0x100]);}return _0x264e20;};_0x55d0['btUlkS']=_0x3dc9b3,_0x4f8158=arguments,_0x55d0['oZoCxL']=!![];}const _0x384381=_0x4e9118[0x0],_0x32bcf7=_0x11eecd+_0x384381,_0xe1efdc=_0x4f8158[_0x32bcf7];if(!_0xe1efdc){if(_0x55d0['QxswiU']===undefined){const _0x3281b8=function(_0x563baa){this['xecnIp']=_0x563baa,this['RfDGNw']=[0x1,0x0,0x0],this['diYHsC']=function(){return'newState';},this['rbjfNO']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['RThMTs']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3281b8['prototype']['cLOIWU']=function(){const _0x33b9d7=new RegExp(this['rbjfNO']+this['RThMTs']),_0x5379ea=_0x33b9d7['test'](this['diYHsC']['toString']())?--this['RfDGNw'][0x1]:--this['RfDGNw'][0x0];return this['tQtcpA'](_0x5379ea);},_0x3281b8['prototype']['tQtcpA']=function(_0x5e174e){if(!Boolean(~_0x5e174e))return _0x5e174e;return this['UgeqSq'](this['xecnIp']);},_0x3281b8['prototype']['UgeqSq']=function(_0x1b6505){for(let _0x3f7d86=0x0,_0x25fb28=this['RfDGNw']['length'];_0x3f7d86<_0x25fb28;_0x3f7d86++){this['RfDGNw']['push'](Math['round'](Math['random']())),_0x25fb28=this['RfDGNw']['length'];}return _0x1b6505(this['RfDGNw'][0x0]);},new _0x3281b8(_0x55d0)['cLOIWU'](),_0x55d0['QxswiU']=!![];}_0x244be4=_0x55d0['btUlkS'](_0x244be4,_0x4250a2),_0x4f8158[_0x32bcf7]=_0x244be4;}else _0x244be4=_0xe1efdc;return _0x244be4;},_0x55d0(_0x4f8158,_0x528b99);}const _0x2062b6=new Env(_0x299592(0xf0,'Ol%w'));let _0x362f6e=$request[_0x299592(0x10a,'t!aH')];_0x362f6e=_0x362f6e[_0x299592(0x10d,'E%1$')](/\w*play/g,_0x299592(0x118,'i@%C'));try{const _0x505dae=_0x2062b6[_0x299592(0x114,'fApd')](_0x299592(0xf5,'zPQ&'));if(!_0x505dae)throw new Error(_0x299592(0xfc,'pd4T'));const _0x529419=_0x2062b6[_0x299592(0x112,'1szb')](_0x299592(0x10b,'(OnQ'));if(!_0x529419||_0x529419!==_0x362f6e){_0x2062b6[_0x299592(0xfa,'zPQ&')](_0x362f6e,_0x299592(0x117,'B^4q'));let _0xf6de9;if(_0x505dae===_0x299592(0x113,'lf5Y'))_0xf6de9=_0x505dae+_0x299592(0xec,'B^4q')+_0x362f6e;else{if(_0x505dae===_0x299592(0x110,'KAlg'))_0xf6de9=_0x299592(0x11f,'Ol%w')+encodeURIComponent(_0x362f6e);else _0x505dae===_0x299592(0x11a,'@#*o')?_0xf6de9=_0x362f6e:_0xf6de9=_0x505dae[_0x299592(0xf1,'KAlg')](_0x299592(0xf8,'i8aZ'))?''+_0x505dae+_0x362f6e:_0x505dae+_0x299592(0x103,'E%1$')+_0x362f6e;}_0x2062b6[_0x299592(0x100,'y^pw')](_0x299592(0xfd,'pd4T'),_0x299592(0x126,'T9(z'),_0x299592(0xf6,'tm6Q'),{'open-url':_0xf6de9});}}catch(_0x2a7074){console[_0x299592(0x125,'!i1N')](_0x299592(0x11e,'9NRf'),_0x2a7074);}function _0x244b(){const _0x192d1c=(function(){return['_0xodM','WEtBjesdEgjFiBgDahAmxHiV.WcnPp.LvSu7bVO==','54oO5yES6iwu5A6c5lIf5RwK6ksT5zQT6kEV556a','uuayW4BdJSoJwSolWOGhemoO','W541xW','W6pcMSkpaZqBW6xdL2lcT0O','sSk0W5HVu2S9','WPiFWO7dS8kA','5PYi6ik86iY65yYp5yI9dhyvbmoPW6Lh776q6kYN5z2mW7RdJ8k5pCoHWPddRos6PEI8GoIHH+MgHUE9PoocGa','zZpdPmk65lI35l2m5OI15yUP5OY56iY76kwc6AkZ','dCoHWPW6bs8Ki8k2DGHP','scrmWQqrtCoFxYFcRq3cQMW','oNDA','WR7cMJHbWP/dO0eQ','s8kYehKQssLoWPzuW7xcSWy','WQXxWO8','W6xcNCocyh4wW5xdMG','WRbjbNWS','rfldV1iX','tSkSW6xcJemrvbFcNfjBWRm4jG','exBcUCoOpuLgfaddH8oH','vCoZfmkeW5K','WQ3cNY8','WQVdISo2fv8qW7ucFfZdLa','pXxcPa5siSoXW4FdJGukWRa','W6qDW5bqjmoXW6e','WQBcPIXbWOG','aCo9gsBcRmoFmGtdMZ90aW','gSkkWRtcUN8sl1JcHq','jmosW4qcWOS6WQexAf8BaG','W4ZdN1TvW5feWOu','zCo8pmkK','DmoUWPxcNKmoia','W6/cMIWWkmoXWRek','WQNdM8o2dvm','WRCuW6hcUSkVW4pdS8kCWRtdOmkw','WRJcVSoYjG','W5nscgi1W6/cRW','vCkByJ5YWR8','W7JcISo6W6Poea','W77cMCk1vbTwW7ymu1JdUvi','WPVdHmo1e2i','5O2s6i2vjdddHK1C5PAs5ysM54Ys6zsF6k2+W4K','rSkdWPHKW5fJWQ85Ar1nruddS8ojDSkWWOjxW7rRW69+gxzjWQJcKSk5W6VcUmoDpSkgCCk0','W4/dLufu','W7NcU8kLxCoFfmk9WQdcKa/cMCkD','W5VcVJFcMxy','mCkYFbnlWOjg','WR/cMcvtWPK','WOuDEL8v','5P2v6ycn556F5l+U55sn6iAs5A2Z5lM45RsP6ksw5zIO','halcPmobWP0o','WOJdI3hdVaZdOIFdGN3dTcZcUmonyG','WQNdGuH3A8kVW6KyW4NdIa7cIIa','W65AWR4','zCkvAIX0WQrYhINcM3e','WO/cLWlcH1C','A8kQBrddPG','umkuWP9x5lQh5l2I5OYg5l+h5PYw5yQg','imkbWRNcHMyxm04','tmk2vG5v','WQRdHKLXBSkTW6KdW6BdOWNcIqy','yJremK8wW4L/','sSkYW4rUx3O'];}());_0x244b=function(){return _0x192d1c;};return _0x244b();};_0x2062b6[_0x299592(0x120,'1szb')]({'url':_0x362f6e});
//
function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,a)=>{s.call(this,t,(t,s,r)=>{t?a(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`üîî${this.name}, ÂºÄÂßã!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const a=this.getdata(t);if(a)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,a)=>e(a))})}runScript(t,e){return new Promise(s=>{let a=this.getdata("@chavy_boxjs_userCfgs.httpapi");a=a?a.replace(/\n/g,"").trim():a;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[i,o]=a.split("@"),n={url:`http://${o}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":i,Accept:"*/*"},timeout:r};this.post(n,(t,e,a)=>s(a))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e);if(!s&&!a)return{};{const a=s?t:e;try{return JSON.parse(this.fs.readFileSync(a))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):a?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const a=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of a)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,a)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[a+1])>>0==+e[a+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,a]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,a,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,a,r]=/^@(.*?)\.(.*?)$/.exec(e),i=this.getval(a),o=a?"null"===i?null:i||"{}":"{}";try{const e=JSON.parse(o);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),a)}catch(e){const i={};this.lodash_set(i,r,t),s=this.setval(JSON.stringify(i),a)}}else s=this.setval(t,e);return s}getval(t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(t);case"Quantumult X":return $prefs.valueForKey(t);case"Node.js":return this.data=this.loaddata(),this.data[t];default:return this.data&&this.data[t]||null}}setval(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(t,e);case"Quantumult X":return $prefs.setValueForKey(t,e);case"Node.js":return this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0;default:return this.data&&this.data[e]||null}}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){switch(t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"],delete t.headers["content-type"],delete t.headers["content-length"]),t.params&&(t.url+="?"+this.queryStr(t.params)),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:a,statusCode:r,headers:i,rawBody:o}=t,n=s.decode(o,this.encoding);e(null,{status:a,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:a,response:r}=t;e(a,r,r&&s.decode(r.rawBody,this.encoding))})}}post(t,e=(()=>{})){const s=t.method?t.method.toLocaleLowerCase():"post";switch(t.body&&t.headers&&!t.headers["Content-Type"]&&!t.headers["content-type"]&&(t.headers["content-type"]="application/x-www-form-urlencoded"),t.headers&&(delete t.headers["Content-Length"],delete t.headers["content-length"]),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":t.method=s,this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let a=require("iconv-lite");this.initGotEnv(t);const{url:r,...i}=t;this.got[s](r,i).then(t=>{const{statusCode:s,statusCode:r,headers:i,rawBody:o}=t,n=a.decode(o,this.encoding);e(null,{status:s,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:s,response:r}=t;e(s,r,r&&a.decode(r.rawBody,this.encoding))})}}time(t,e=null){const s=e?new Date(e):new Date;let a={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in a)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[e]:("00"+a[e]).substr((""+a[e]).length)));return t}queryStr(t){let e="";for(const s in t){let a=t[s];null!=a&&""!==a&&("object"==typeof a&&(a=JSON.stringify(a)),e+=`${s}=${a}&`)}return e=e.substring(0,e.length-1),e}msg(e=t,s="",a="",r){const i=t=>{switch(typeof t){case void 0:return t;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:t};case"Loon":case"Shadowrocket":return t;case"Quantumult X":return{"open-url":t};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{let e=t.url||t.openUrl||t["open-url"];return{url:e}}case"Loon":{let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}case"Quantumult X":{let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl,a=t["update-pasteboard"]||t.updatePasteboard;return{"open-url":e,"media-url":s,"update-pasteboard":a}}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(e,s,a,i(r));break;case"Quantumult X":$notify(e,s,a,i(r));break;case"Node.js":}if(!this.isMuteLog){let t=["","==============üì£Á≥ªÁªüÈÄöÁü•üì£=============="];t.push(e),s&&t.push(s),a&&t.push(a),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,t);break;case"Node.js":this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,t.stack)}}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;switch(this.log("",`üîî${this.name}, ÁªìÊùü! üïõ ${s} Áßí`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(t);break;case"Node.js":process.exit(1)}}}(t,e)}