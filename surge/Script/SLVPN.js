/*
[rewrite_local]
https:\/\/sl\.eric\.vpn url script-analyze-echo-response slvpn.js

[MITM]
hostname = sl.eric.vpn
*/
var _0xods='jsjiami.cn.v7';const _0x4fa59c=_0xd3df;(function(_0x5c63f2,_0x351e14,_0x3a65c0,_0x49c9d6,_0xca008c,_0x3fd9c3,_0x5a60b6){return _0x5c63f2=_0x5c63f2>>0x8,_0x3fd9c3='hs',_0x5a60b6='hs',function(_0x20d198,_0x2ce9d4,_0xfba013,_0xe93e24,_0x39e43d){const _0x3bbb10=_0xd3df;_0xe93e24='tfi',_0x3fd9c3=_0xe93e24+_0x3fd9c3,_0x39e43d='up',_0x5a60b6+=_0x39e43d,_0x3fd9c3=_0xfba013(_0x3fd9c3),_0x5a60b6=_0xfba013(_0x5a60b6),_0xfba013=0x0;const _0x1e07cf=_0x20d198();while(!![]&&--_0x49c9d6+_0x2ce9d4){try{_0xe93e24=parseInt(_0x3bbb10(0x94,']7r6'))/0x1+parseInt(_0x3bbb10(0x187,'^cIX'))/0x2*(-parseInt(_0x3bbb10(0x125,'L3h1'))/0x3)+-parseInt(_0x3bbb10(0x103,'1kxK'))/0x4+-parseInt(_0x3bbb10(0x12c,'FV$7'))/0x5+parseInt(_0x3bbb10(0x14d,')XTi'))/0x6+-parseInt(_0x3bbb10(0x123,'3HZv'))/0x7+parseInt(_0x3bbb10(0xdd,'jDQ#'))/0x8;}catch(_0x197fb5){_0xe93e24=_0xfba013;}finally{_0x39e43d=_0x1e07cf[_0x3fd9c3]();if(_0x5c63f2<=_0x49c9d6)_0xfba013?_0xca008c?_0xe93e24=_0x39e43d:_0xca008c=_0x39e43d:_0xfba013=_0x39e43d;else{if(_0xfba013==_0xca008c['replace'](/[BKkyPHDOtEXCYlpoLrdFf=]/g,'')){if(_0xe93e24===_0x2ce9d4){_0x1e07cf['un'+_0x3fd9c3](_0x39e43d);break;}_0x1e07cf[_0x5a60b6](_0x39e43d);}}}}}(_0x3a65c0,_0x351e14,function(_0x5a0b5d,_0x3d5ff6,_0x57b20d,_0x24b105,_0x2451e0,_0x4fd8e4,_0x191d8e){return _0x3d5ff6='\x73\x70\x6c\x69\x74',_0x5a0b5d=arguments[0x0],_0x5a0b5d=_0x5a0b5d[_0x3d5ff6](''),_0x57b20d=`\x72\x65\x76\x65\x72\x73\x65`,_0x5a0b5d=_0x5a0b5d[_0x57b20d]('\x76'),_0x24b105=`\x6a\x6f\x69\x6e`,(0x186aa2,_0x5a0b5d[_0x24b105](''));});}(0xc800,0xa9ed6,_0x4e89,0xca),_0x4e89)&&(_0xods=`\x620`);const _0x58b57c=(function(){const _0x484889=_0xd3df,_0xd464bf={'euyxi':_0x484889(0xf2,'h3m#'),'Royse':function(_0x5539ee,_0x61e83){return _0x5539ee<_0x61e83;},'yEizg':function(_0x2bbb4a,_0x357b66){return _0x2bbb4a===_0x357b66;},'XNoSI':function(_0x475f7a,_0x1f7871){return _0x475f7a===_0x1f7871;},'TwOyM':function(_0x354f26,_0x143706){return _0x354f26===_0x143706;},'VmRzn':function(_0x43b2c9,_0x5e17ee){return _0x43b2c9*_0x5e17ee;},'iTtFU':_0x484889(0x119,'!&b('),'YcPDV':_0x484889(0x18a,'$3hO')};let _0x171d42=!![];return function(_0x379219,_0x5e2a05){const _0xc0b89f=_0x484889,_0x45abff={'HhPdd':_0xd464bf[_0xc0b89f(0x134,'rbq(')],'Wtadr':function(_0x4f141d,_0x5c58cb){const _0x3320a3=_0xc0b89f;return _0xd464bf[_0x3320a3(0xff,'o$I[')](_0x4f141d,_0x5c58cb);},'HovuC':function(_0x1715aa,_0x1009e5){const _0xb1790c=_0xc0b89f;return _0xd464bf[_0xb1790c(0xe7,'&*3b')](_0x1715aa,_0x1009e5);},'hamPT':function(_0x4d7be1,_0x27f61a){const _0x5d0f6b=_0xc0b89f;return _0xd464bf[_0x5d0f6b(0x10b,'!&b(')](_0x4d7be1,_0x27f61a);},'sDbSh':function(_0x50ffcb,_0x58a060){const _0x3ee11d=_0xc0b89f;return _0xd464bf[_0x3ee11d(0xde,'FV$7')](_0x50ffcb,_0x58a060);},'svrNx':function(_0x3b625e,_0x3f885f){const _0x468e2d=_0xc0b89f;return _0xd464bf[_0x468e2d(0x154,'EScW')](_0x3b625e,_0x3f885f);}};if(_0xd464bf[_0xc0b89f(0xd1,'EScW')](_0xd464bf[_0xc0b89f(0x135,'1kxK')],_0xd464bf[_0xc0b89f(0xeb,'*TBc')])){let _0x1c98ee=_0x45abff[_0xc0b89f(0x101,'1kxK')],_0x30bac='';for(let _0x2db1c4=0x0;_0x45abff[_0xc0b89f(0x104,'3V[0')](_0x2db1c4,0x24);_0x2db1c4++){_0x45abff[_0xc0b89f(0x117,')(5o')](_0x2db1c4,0x8)||_0x45abff[_0xc0b89f(0x158,'WcFs')](_0x2db1c4,0xd)||_0x45abff[_0xc0b89f(0xaa,'L3h1')](_0x2db1c4,0x12)||_0x45abff[_0xc0b89f(0x114,'h3m#')](_0x2db1c4,0x17)?_0x30bac+='-':_0x30bac+=_0x1c98ee[_0x4f6478[_0xc0b89f(0xc4,'E&Ui')](_0x45abff[_0xc0b89f(0x105,'S]t0')](_0x7d8c7c[_0xc0b89f(0xa8,'XiV^')](),_0x1c98ee[_0xc0b89f(0xe3,'idUy')]))];}return _0x30bac;}else{const _0xe46959=_0x171d42?function(){const _0x133820=_0xc0b89f;if(_0x5e2a05){const _0x5e3e0a=_0x5e2a05[_0x133820(0x126,']7r6')](_0x379219,arguments);return _0x5e2a05=null,_0x5e3e0a;}}:function(){};return _0x171d42=![],_0xe46959;}};}()),_0x370812=_0x58b57c(this,function(){const _0x161770=_0xd3df,_0x5ec775={'Tpqus':_0x161770(0x18f,'h3m#')};return _0x370812[_0x161770(0xe0,'EScW')]()[_0x161770(0xbd,')(5o')](_0x5ec775[_0x161770(0xaf,'*TBc')])[_0x161770(0xfe,'b%Zx')]()[_0x161770(0xc8,'!@zR')](_0x370812)[_0x161770(0x89,'$3hO')](_0x5ec775[_0x161770(0xef,'1kxK')]);});function _0x4e89(){const _0x21e07a=(function(){return['_0xods','kjOYspoCjXkiBaFmfil.drcKDn.DHvkP7yECHtL==','WRRcL8kFWPK','W4JcP1RdN0S','W73cV8oQaW','aSk8v3pdNG','W71wEmkRpCkgksFdTfDZignTW6y/WOHFiSksteBcPmkAWPO3WPBdOHTdWQZcS0a','WRlcTmotW5ZcMmow','WP4VbL8U','kGNcO8oSW68','aIXbEmoj','btPiACo3uG','WPNdKtJcOZi9WRjSeSo3C0bTWOG','W5Powmk8ha','ACopsH5HvW','WP/cSSk3WQeFlCoOWP0','W7L9AZO','WPn+nW7cRCkm','BCoUW4hdI8o6W4C','W7tdUCoJfq','BxVcMxNcGG','WRpcSSo3W5BcLq','d8kZDvZdGa','WOS3lfSv','WRqMo1y','oCkMsg/dQbuI','ka4imay','vCoMFNVcGG','lrNdULtcIG','W6OsiCos','W4bUWP4ZW5O','W6bmWOmKW6G','WP3cSq7dK8oO','WOBcU8orpcSiW6JcKa9PuCovWRtcIJCdd8o2W5dcJf0PlSkhW57dGXXKWOBcV8oBFCkgx8k7W70','W6NdS8osaeq','BmotW5iXaCoWW6vBW4FcHCkvWRRdKq','tCoThxiW','qfxcLKa','hJxdHgJcUW','eCobyCoHWRzl5QQ96iQr5lI65REp5l+e','W5RcUwVdNWa','WQi0peKd','WRtdUSoaxW','y8oAqCoNW44','W6xcSCo+eG','fGaovCokW5ddVGa','oZbFFCoM','EmoNuSoKW7hcRw4CbrxdKmoJfKKkWPqbWPLRuSkpuSorWRVdQ8oVyKD+lJlcKqySub7cKceIW4XsW6zHWQziWRNcTCk3qffAWPCQo8kiz8oKFgNdMYFdRmoWpSo5W7hdGHhcLCoLAmoDB8k3oJzDW6ldGeLgW4xcQYv/oJ/cIL3dHfPFW7/dISoVW6KuyCoEWPf8WPRdP8khWRxcO8oBW5/cRCoCWRRcRv/dMLrqWPLeW55jySkJWRlcICkcW7bUu2tdL0hdS2r7','W5X2WR8IW40','WR09p0m','WQyQW5TXWPa+pSkzWPy7WPpdUc4','ySo8sCoPW68','W7pdTSoHpLu','WRtdSSoyCSos','yvxcTfyt','cbWYtW','ds7dP00','acX3E8oMsaO','WRLrnJNcIW','fWe3gYi','W4quW6pdT0K','n0VdGCkqla','WRiZiKm','WPJcGSopzmkv','n8kIW74SW5n+W6ddGG','WQdcIrGiomo1uCoBua','W7hcH8kEWP05WRK','W57dQ8kox0S','kCo5FCoauwKaW6mVda','W6BdRmo8h18','W5iCi8opW5e','W6ZcRSo9cSoz','WQrYfYFcIG','Bmk3W6bSW5BdOCkJW5ldLrJdVSkbfa','W67dQ8kZWR/cHW','dI7dMeZcN8kh','lWxcPCohW5C','id7cVSowW4KnF8oMqGey','s8oVhq','WQK3oLO5','W4ldPCkSBxu','W5xcPSopa8oc','WQiOpMH7wSoBg8oQWRpdQSoQWQK','WRhcPthdKSoMW6FcGmoyW63dV8oVlh4','ymoEW5H8E8kLWPfVW6a','yeJcR2lcVW','BSo7W5VdHCoHW4hcRG','WQS2WRP3WOO','CCofvs88txDtWQFcTCkJWRP2W7rmWOBcUCoPW5pdQu00W79ceffSncVcLmkJxCkMW45gwmoYW5pdHInBomkiWQhdUmkeWQ0jl8kAW6FcPSkmW7tdHmkXWRD+imorctBdTW','wSo8bxO','fCkxAexdJW','WRWbjSo1zSoCCIRcLwrYAJy','WPBcHSoKW6xcPW','iXTuECoL','WPJdTmobx8k1W6FcPwpcHmkZW5axBNrmyq3dUW','W6LCyW','WR3dRmohySok','lvFdQCkBnmomeCkLWO3cKu0OWRxcHKBdOZS0r8krtw/dQx3cOCoyCKf5WOBcLrldVG','u1VcKvC/','ya/cPSkoW5u','W71kWPSaW7W','p13dL8kIoq','k8ots8oKWQ0','WPVcJcCPiW','dmkLANec','oCkxW4GVW4LEWOSPveBcJCkUW70','WOzWW4LfW5e','W7arqCo6','WRRcUrVdJG','W556FHuF','ASoTWOPRWR4','WQxdImkae8kC','we7cKuq','w8oTkGy','ymo7W5/dGmoNW4ZcVh7cINZcVCojz8k/WOPl','mIW8B8oG','W7bMBY8','W4BcKwG','C8k/ka','W57dP8kIyw4','W53cKCoEmG','tCo4egKNpW','lSopBq','W6u/W5ZdLfK','W63dOKBcJSkYWRxdQSoAW5ldL8oacMi','bCkdFLxdHcKyl8kfeciqW5u','W6uyqCoZW7mMaSokWORdIwrsW4FdL1/dTG','iqraW4hcIq','pSkoWQPAvW','WOnWprm','k8otwSo7WRDE','WR3cSmk2WQ8d','W4vzAt4b','rSoTsCo/W77cQq','W6hdR0ZdG8oiW6dcNSoUW7u','WRpcPSoUW63cQW','q8oRntCj','WOZcOaK','WQJcPb8Pnq','W60BFSoVW64SdmoqWPa','C8oQW4hdImoHW4i','W6KdoCotW6y','qfVcKvW','t3xcOa3dH8oAhJeKv8obda','uSo0vhS','iWvyW7dcTmkH','W5pcIexdKvy','q8o4mWi','asTsFSoWafXCpqm0W5HTWOOpDmkmW7pdV8oofmoLdd8cBW','W5idW7/dM04','WQJcQSkZWOyc','gqXIW4BcHa','WP8QpNKS','WQ7cLXOAmG','k8otrCoKWRbdW6noW60','WOpcSCkYWPG1','WPf+lqi','gSk9z195emkCi8oCrmoA','l03dO8khiq','eXO4u8orW5ZdOW','ySoArcS/bwDBWQ3dTCkJWR5JWRqfWOFcQG','tSo8fN4','pvddSmkMka','f8owumocWRW','WQLnmaZcRa','WRBcTXldKG','W4ldLmkrWORcTq','WQJdVCowrq','eWi8dq','umoAWO1MWPLR','gI9kz8o3','W7/dKmkrWRBcOa','vmo9W7xdUSo2','nCkgWPH8ECkOWRLzW7FcKmk1','yCopDdLM','gCorWRuWWRW','WRVcICkSWQmH','WQVdTmocB8oo','W5lcT8oszG','xCo8xmo9W67dUYaCq1tcJ8kTuKK0WP5lW5OLpmoYCmkaWOBcI8o/pemvBZZcHqfQgfFcSNaGW5T0WPOGWO4iWRBcGSo2h0HmWQu9DSkKA8oKacRcIwhcOCkZECkQWQe','W6hdKSkHrha','WRlcTmosW4JcMSobWQ8','mSkvh2nsDuX8WQFdLW','WPpcUComAG','W6hdUCoriL4','WRNcIrOila','uCoWtxBcMtC','kcZdHuBcMa','fq8AmrW','W57dQCoCW6jyCCk0WR94WOddJmo+ja','WP7cOSolitquW7xcJHX5o8kZ','wmoGnW0K','WOZdVSoIrCo7','zCo0qhBcHq','smoTW7/dLSoM','z8k+t38','WRlcMq0sbmo5','xmoznG','emk1EhGd','W6mJoSoCW4O','WOBcPSkgWQ8t','WPxcQCoeW7dcQG','CCopytrKqhf9WQRdQSkN','A8oWWR9YWOySWQtcK8oPpIxcRKZcMa','ymokWPXVW5mmW5iMBwG','W6WrW5pdTMS','W6JdP03cHmk3WRBdPmkkWQlcTmohgLJdHSosWPuAW4pdR8oUW4VcMSkaW4NcR8oRiG3cQCkKWPO5jNpdGtC','maNdPJ/dVSoMW7L1ifCx','WPtcPCoJF8kX','W6n5DsS','WPVcVSkYWP4/','W43cI2hdTwXIW7S','BHJcHSkLW6G','W64rW6FdLs/dLreCcddcHmkrmSkEeSolF8ku','WOZdPSouySou','cXWmvmoDW4VdQq','ASk1p8kD','W6tcSmoPa8oyWOldIa','cSo6BSobWPq','F8owWOL6','WPlcRGVdUmoZ','xspcQCkDW68','WRldSCofFCot','WPv6kH4','BmkTiCkCF1q','lLNdSSkD','DvFcJhRcTmoLW556','wCoTmaOUfW','nSozESoX','kSkJWOLBwa','w3/cUuVcNW','5REg6kYlW7WtW4xcV8ox','aH00hsq','W7P5CJCHcW','jr0Pasm','5RwG6k2zpX4O','fCk/seNdKq','WRhcJxbEg8kvWPyBzaNcQhBcMCkic8o3WPFcLWy','WQZcMrGicmo1','cHSWtq','W4RcKMy','CSoskfeR','k8kStN4j','WRNcGdLOnSoC','BSkTo8kq','lCkEWPTT','WOFcUmkkWRizla','WONcVCkfWPiU','W6KwnmoiW7fr','mSoIymobWPy','W7ldSmkiWQ3cNGZcUSofc8krexmVcSk9bCoAW6fmn8o5WO7cSCkAxvyRW6FcS2WVEmoAW4NdI3Pgz8kejgNcSmk5WRtdIuxcMSksESkTWR0EjKeqW5ldHJmFpXOGW4/dGCo1WRr3v8o8WPSmi38q','WRDtW6n3W70','qmoClsyx','WRlcKeiffCo4u8kbr8o7WQ4','smo6DxhcGtyxWPyKymky','WQ3dJmk1jCkg','Bmo4xHjb','jbnrW6hcIG','nSoQqCobWR0','iCopzmoNWRbyW7LdW6RdOCkS','lrZcOmoTW5W','WRm0bLiQWPi','jWS/z8o7','fdldP03cGmkAw3mHbSkebCkqhe7dUdqpWOtcHq7cLaRcRZKUfSoNh8koW5eTuW','oLFdPCkanCoaeCk6','kSoRWRe1','WPNcNCo3W6NcHW','seb3','WR/cQSkRWQWG','wCoTrSoQW6NcQq'];}());_0x4e89=function(){return _0x21e07a;};return _0x4e89();};_0x370812();const _0x1f4034=new Env(_0x4fa59c(0xf8,'!@zR'));_0x1f4034[_0x4fa59c(0xfd,'tWIY')]=_0x4fa59c(0xc2,'$3hO'),_0x1f4034[_0x4fa59c(0x124,')XTi')]=!![],_0x1f4034[_0x4fa59c(0x108,'b%Zx')]=_0x1f4034[_0x4fa59c(0x176,')XTi')],_0x1f4034[_0x4fa59c(0x164,'XiV^')]=_0x1f4034[_0x4fa59c(0xe1,'3HZv')],_0x1f4034[_0x4fa59c(0xba,'L3h1')]=_0x4fa59c(0x172,'hlQI');async function _0x2d4cb6(){const _0x983136=_0x4fa59c,_0x19e5ee={'cITov':function(_0x46df8b,_0x154a45){return _0x46df8b(_0x154a45);},'EdbFC':_0x983136(0x165,'o$I[')};_0x1f4034[_0x983136(0xb4,'b%Zx')]=await _0x19e5ee[_0x983136(0xb1,'&*3b')](_0x1c6e2d,{'url':_0x19e5ee[_0x983136(0xcb,'b%Zx')]});}async function _0x53ca5b(){const _0x47ae60=_0x4fa59c,_0x375298={'lCFwD':_0x47ae60(0x113,'HrXv'),'hutkj':_0x47ae60(0x88,'CaMJ'),'doYbu':function(_0x445ee7){return _0x445ee7();},'ksgvJ':function(_0x436e08,_0x20e2c7){return _0x436e08(_0x20e2c7);},'QoQbD':_0x47ae60(0xac,'tWIY')},[,_0x52c45f]=_0x1f4034[_0x47ae60(0x16d,'!&b(')][_0x47ae60(0x15e,')(5o')](_0x375298[_0x47ae60(0xe5,']7r6')]);let _0x30b868='';switch(_0x52c45f){case _0x375298[_0x47ae60(0xe6,'WcFs')]:let _0x16e0e5=await _0x375298[_0x47ae60(0x17f,'^cIX')](_0x5f1a58),_0x5346bb=await _0x375298[_0x47ae60(0xdb,'o$I[')](_0x3ced92,_0x16e0e5);_0x30b868=await _0x375298[_0x47ae60(0xc6,'F9lp')](_0x474410,_0x5346bb),console[_0x47ae60(0x14b,'!@zR')](_0x30b868);break;default:_0x1f4034[_0x47ae60(0x146,'jDQ#')](_0x1f4034[_0x47ae60(0xe9,'2TP2')],'',_0x375298[_0x47ae60(0x107,'7S$O')]);break;}return _0x30b868;}async function _0x512265(){const _0x35ee2e=_0x4fa59c,_0x1c37e5={'hlVMX':_0x35ee2e(0x183,'FT9D'),'REoaO':_0x35ee2e(0xb0,'XiV^')},[,_0x2cee39]=_0x1f4034[_0x35ee2e(0xb9,'r^6g')][_0x35ee2e(0xad,'*TBc')](_0x1c37e5[_0x35ee2e(0x16c,'EScW')]);_0x1f4034[_0x35ee2e(0x147,'r^6g')](_0x1f4034[_0x35ee2e(0x161,'jm*f')],'',_0x1c37e5[_0x35ee2e(0x155,'3HZv')]);}async function _0x474410(_0x384fb1){const _0x350fc9=_0x4fa59c,_0x2e44e9={'QpzhX':function(_0x3fa039,_0x423f70){return _0x3fa039(_0x423f70);}},_0x3682e3={'url':_0x384fb1,'headers':{'Accept':_0x350fc9(0x129,'^cIX'),'Sec-Fetch-Mode':_0x350fc9(0x111,'aW3S'),'Connection':_0x350fc9(0x91,'wCwi'),'Accept-Encoding':_0x350fc9(0x171,'^cIX'),'Host':_0x350fc9(0xd7,'FV$7'),'User-Agent':_0x350fc9(0x100,'3V[0'),'Sec-Fetch-Site':_0x350fc9(0x188,'FT9D'),'Accept-Language':_0x350fc9(0xb2,'7ro#'),'Sec-Fetch-Dest':_0x350fc9(0xcd,'o)FA')}};let _0x3210a6=await _0x2e44e9[_0x350fc9(0xe8,'2TP2')](_0x1c6e2d,_0x3682e3);return _0x3210a6;}async function _0x3ced92(_0x5036b0){const _0x4a2f87=_0x4fa59c,_0xbc6f6f={'IfPzh':_0x4a2f87(0x184,'3V[0'),'Yayhs':_0x4a2f87(0x9a,'8ljY'),'xjJEV':_0x4a2f87(0x8a,'&*3b'),'aytIP':_0x4a2f87(0x102,'2TP2'),'aeQWa':_0x4a2f87(0x132,'o)FA'),'CwWSo':_0x4a2f87(0x143,'idUy'),'JxtOp':function(_0xd95a93,_0x30918a){return _0xd95a93(_0x30918a);}},_0x4c2f35={'url':_0xbc6f6f[_0x4a2f87(0x87,'idUy')],'headers':{'user-agent':_0xbc6f6f[_0x4a2f87(0x86,'jm*f')],'accept':_0xbc6f6f[_0x4a2f87(0x163,'jDQ#')],'accept-encoding':_0xbc6f6f[_0x4a2f87(0x131,'YQy#')],'host':_0xbc6f6f[_0x4a2f87(0x136,'o)FA')],'authorization':_0x5036b0,'content-type':_0xbc6f6f[_0x4a2f87(0x167,'EScW')]}};let _0x3c8c21=await _0xbc6f6f[_0x4a2f87(0xa1,')XTi')](_0x1c6e2d,_0x4c2f35);return _0x3c8c21[_0x4a2f87(0x12a,'hlQI')][_0x4a2f87(0x14e,'&*3b')];}async function _0x5f1a58(){const _0x587a28=_0x4fa59c,_0x10388f={'OOIuY':function(_0x33f8cb){return _0x33f8cb();},'EHYft':_0x587a28(0x12f,'YQy#'),'OqMet':_0x587a28(0x14f,'a1#f'),'WXBKo':_0x587a28(0xd0,'b%Zx'),'cEUKK':_0x587a28(0x145,'3HZv'),'PsgIN':_0x587a28(0xcc,'b]@n'),'kPsHV':function(_0x58afac,_0x14c898){return _0x58afac(_0x14c898);}};let _0x14be9b=_0x10388f[_0x587a28(0x14c,'8ljY')](_0x26b4f0);const _0x38bd0b={'url':_0x587a28(0xbf,'@1H7')+_0x14be9b,'headers':{'user-agent':_0x10388f[_0x587a28(0x97,'HrXv')],'content-type':_0x10388f[_0x587a28(0x18c,'b]@n')],'accept':_0x10388f[_0x587a28(0x185,'h3m#')],'accept-encoding':_0x10388f[_0x587a28(0xd4,'jDQ#')],'host':_0x10388f[_0x587a28(0x9b,'YQy#')]}};let _0x367f78=await _0x10388f[_0x587a28(0xc1,'XiV^')](_0x1c6e2d,_0x38bd0b);return _0x367f78?.[_0x587a28(0xd3,'HrXv')]?.[_0x587a28(0x112,'$3hO')];}function _0xd3df(_0x1a5fbb,_0xba5f17){const _0x4ab0ea=_0x4e89();return _0xd3df=function(_0xfc9ff2,_0x4314ea){_0xfc9ff2=_0xfc9ff2-0x86;let _0x4e897b=_0x4ab0ea[_0xfc9ff2];if(_0xd3df['inXHEn']===undefined){var _0xd3dfd9=function(_0x4ee8ac){const _0x3dde74='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x337a85='',_0x37e970='',_0x259000=_0x337a85+_0xd3dfd9;for(let _0x3f3681=0x0,_0x2383e9,_0x5af271,_0x4e6b2c=0x0;_0x5af271=_0x4ee8ac['charAt'](_0x4e6b2c++);~_0x5af271&&(_0x2383e9=_0x3f3681%0x4?_0x2383e9*0x40+_0x5af271:_0x5af271,_0x3f3681++%0x4)?_0x337a85+=_0x259000['charCodeAt'](_0x4e6b2c+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x2383e9>>(-0x2*_0x3f3681&0x6)):_0x3f3681:0x0){_0x5af271=_0x3dde74['indexOf'](_0x5af271);}for(let _0x94d61a=0x0,_0x423ec6=_0x337a85['length'];_0x94d61a<_0x423ec6;_0x94d61a++){_0x37e970+='%'+('00'+_0x337a85['charCodeAt'](_0x94d61a)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x37e970);};const _0x5ea747=function(_0x9c84c,_0x84989a){let _0x1ee6d3=[],_0x2e8d72=0x0,_0x5054b1,_0xd26ece='';_0x9c84c=_0xd3dfd9(_0x9c84c);let _0x1e6a50;for(_0x1e6a50=0x0;_0x1e6a50<0x100;_0x1e6a50++){_0x1ee6d3[_0x1e6a50]=_0x1e6a50;}for(_0x1e6a50=0x0;_0x1e6a50<0x100;_0x1e6a50++){_0x2e8d72=(_0x2e8d72+_0x1ee6d3[_0x1e6a50]+_0x84989a['charCodeAt'](_0x1e6a50%_0x84989a['length']))%0x100,_0x5054b1=_0x1ee6d3[_0x1e6a50],_0x1ee6d3[_0x1e6a50]=_0x1ee6d3[_0x2e8d72],_0x1ee6d3[_0x2e8d72]=_0x5054b1;}_0x1e6a50=0x0,_0x2e8d72=0x0;for(let _0xb1651d=0x0;_0xb1651d<_0x9c84c['length'];_0xb1651d++){_0x1e6a50=(_0x1e6a50+0x1)%0x100,_0x2e8d72=(_0x2e8d72+_0x1ee6d3[_0x1e6a50])%0x100,_0x5054b1=_0x1ee6d3[_0x1e6a50],_0x1ee6d3[_0x1e6a50]=_0x1ee6d3[_0x2e8d72],_0x1ee6d3[_0x2e8d72]=_0x5054b1,_0xd26ece+=String['fromCharCode'](_0x9c84c['charCodeAt'](_0xb1651d)^_0x1ee6d3[(_0x1ee6d3[_0x1e6a50]+_0x1ee6d3[_0x2e8d72])%0x100]);}return _0xd26ece;};_0xd3df['kkRdts']=_0x5ea747,_0x1a5fbb=arguments,_0xd3df['inXHEn']=!![];}const _0x2dbae6=_0x4ab0ea[0x0],_0xeafc7b=_0xfc9ff2+_0x2dbae6,_0x20b7b5=_0x1a5fbb[_0xeafc7b];if(!_0x20b7b5){if(_0xd3df['riGeKG']===undefined){const _0x2119c6=function(_0x4b3b85){this['JSVXmx']=_0x4b3b85,this['fFGvuC']=[0x1,0x0,0x0],this['ZHkCXY']=function(){return'newState';},this['ryKFEs']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['jRyPVk']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2119c6['prototype']['yOnUAt']=function(){const _0x56c208=new RegExp(this['ryKFEs']+this['jRyPVk']),_0x1a9625=_0x56c208['test'](this['ZHkCXY']['toString']())?--this['fFGvuC'][0x1]:--this['fFGvuC'][0x0];return this['VbtcPU'](_0x1a9625);},_0x2119c6['prototype']['VbtcPU']=function(_0x4738b9){if(!Boolean(~_0x4738b9))return _0x4738b9;return this['iRRkmq'](this['JSVXmx']);},_0x2119c6['prototype']['iRRkmq']=function(_0x176156){for(let _0x1d0c4b=0x0,_0x57b586=this['fFGvuC']['length'];_0x1d0c4b<_0x57b586;_0x1d0c4b++){this['fFGvuC']['push'](Math['round'](Math['random']())),_0x57b586=this['fFGvuC']['length'];}return _0x176156(this['fFGvuC'][0x0]);},new _0x2119c6(_0xd3df)['yOnUAt'](),_0xd3df['riGeKG']=!![];}_0x4e897b=_0xd3df['kkRdts'](_0x4e897b,_0x4314ea),_0x1a5fbb[_0xeafc7b]=_0x4e897b;}else _0x4e897b=_0x20b7b5;return _0x4e897b;},_0xd3df(_0x1a5fbb,_0xba5f17);}function _0x26b4f0(){const _0x58d484=_0x4fa59c,_0x703d0b={'JDrwf':_0x58d484(0x160,'b]@n'),'HRifn':function(_0x3a4b50,_0x251679){return _0x3a4b50(_0x251679);},'waqDT':_0x58d484(0x93,')XTi'),'EmhJa':function(_0x56e020,_0x269d2f){return _0x56e020<_0x269d2f;},'XPmWX':function(_0xc696e6,_0x502061){return _0xc696e6===_0x502061;},'eTmkM':function(_0x309643,_0x1d2c7c){return _0x309643===_0x1d2c7c;},'PCaNX':_0x58d484(0xf7,'b]@n'),'ZpKID':_0x58d484(0xf0,'1kxK'),'XYvkS':function(_0x25553a,_0x327b30){return _0x25553a===_0x327b30;},'dbBEL':_0x58d484(0x11d,'#pxQ'),'eSsOY':_0x58d484(0x148,'h3m#'),'nMpHa':function(_0x27dbec,_0x38ddc5){return _0x27dbec*_0x38ddc5;}};let _0x1db68d=_0x703d0b[_0x58d484(0x182,'YQy#')],_0x38f196='';for(let _0x32086e=0x0;_0x703d0b[_0x58d484(0x169,'2TP2')](_0x32086e,0x24);_0x32086e++){if(_0x703d0b[_0x58d484(0x177,'@1H7')](_0x32086e,0x8)||_0x703d0b[_0x58d484(0x17c,'@1H7')](_0x32086e,0xd)||_0x703d0b[_0x58d484(0x13b,'v0dZ')](_0x32086e,0x12)||_0x703d0b[_0x58d484(0x110,'FT9D')](_0x32086e,0x17)){if(_0x703d0b[_0x58d484(0x8d,'HrXv')](_0x703d0b[_0x58d484(0x144,'b%Zx')],_0x703d0b[_0x58d484(0x138,'$3hO')]))return _0x5ec1a3[_0x58d484(0xa7,']7r6')]()[_0x58d484(0x156,'3V[0')](KQvnxm[_0x58d484(0xed,'b]@n')])[_0x58d484(0xe0,'EScW')]()[_0x58d484(0x11e,'#pxQ')](_0x2b885b)[_0x58d484(0x14a,'hlQI')](KQvnxm[_0x58d484(0x12e,'o$I[')]);else _0x38f196+='-';}else _0x703d0b[_0x58d484(0xa2,'rbq(')](_0x703d0b[_0x58d484(0x18d,'*TBc')],_0x703d0b[_0x58d484(0x128,'^7Sc')])?_0x168356[_0x58d484(0x10f,'2TP2')][_0x262577[_0x58d484(0x8f,'^cIX')]()](_0x4c2bcc)[_0x58d484(0x178,'YQy#')](_0x4ba192=>{const _0x1fe62b=_0x58d484;let _0x46776f=_0x4ba192[_0x1fe62b(0x13d,')XTi')];_0x46776f=_0xe48351[_0x1fe62b(0x121,'h3m#')](_0x46776f)||_0x46776f,_0x703d0b[_0x1fe62b(0x175,'!&b(')](_0x242af0,_0x46776f);})[_0x58d484(0xb7,'CaMJ')](_0x3fbb2f=>_0x29c765(_0x3fbb2f)):_0x38f196+=_0x1db68d[Math[_0x58d484(0x10c,'*TBc')](_0x703d0b[_0x58d484(0xc9,'#pxQ')](Math[_0x58d484(0xe2,'!&b(')](),_0x1db68d[_0x58d484(0xbb,'EScW')]))];}return _0x38f196;}!(async()=>{const _0x326a6e=_0x4fa59c,_0x446216={'WKnje':function(_0x38f2bb,_0x2842c8){return _0x38f2bb*_0x2842c8;},'PkQna':function(_0x1ed714,_0x1b6a3e){return _0x1ed714(_0x1b6a3e);},'Egqdk':function(_0x5f30be,_0x21dfb4){return _0x5f30be===_0x21dfb4;},'kbYST':_0x326a6e(0x15a,'7ro#'),'DhPlc':function(_0x4bffbf,_0x282205){return _0x4bffbf===_0x282205;},'BZtTx':_0x326a6e(0x149,'tWIY'),'chvSp':function(_0xfa089b,_0x5a52ed){return _0xfa089b===_0x5a52ed;},'MAgXX':_0x326a6e(0xea,'&*3b'),'tJKUy':_0x326a6e(0xd5,'tWIY'),'hgkYH':_0x326a6e(0x180,'@0lH'),'ZGfEY':_0x326a6e(0x127,'idUy'),'ndvVI':function(_0x5afcd9){return _0x5afcd9();},'LOYJo':_0x326a6e(0x16f,'o)FA'),'HZdUP':_0x326a6e(0xb5,'jDQ#'),'VlTQD':function(_0x4014a2){return _0x4014a2();}};_0x1f4034[_0x326a6e(0xee,')(5o')]=_0x446216[_0x326a6e(0x191,'YQy#')](_0x327911,$request[_0x326a6e(0x11f,'hlQI')]);const [,_0x4ec1b2]=_0x1f4034[_0x326a6e(0x15f,'7S$O')][_0x326a6e(0x17b,'o$I[')]('?');_0x1f4034[_0x326a6e(0x170,'b%Zx')]=_0x4ec1b2?_0x4ec1b2[_0x326a6e(0x120,'2TP2')]('&')[_0x326a6e(0xb8,'7ro#')]((_0x4db53c,_0x1fd04e)=>{const _0x53bc13=_0x326a6e,[_0x2859ff,_0x300aa6]=_0x1fd04e[_0x53bc13(0xf5,'hlQI')]('=');return _0x4db53c[_0x2859ff]=_0x300aa6,_0x4db53c;},{}):{},_0x1f4034[_0x326a6e(0xec,'jm*f')]=_0x446216[_0x326a6e(0xf1,')XTi')]($request[_0x326a6e(0xae,'3HZv')],_0x446216[_0x326a6e(0x99,'rbq(')]),_0x1f4034[_0x326a6e(0x11c,'b]@n')]=_0x446216[_0x326a6e(0xd9,'2TP2')]($request[_0x326a6e(0xb3,'$3hO')],_0x446216[_0x326a6e(0xcf,'WcFs')]),_0x1f4034[_0x326a6e(0x15c,'a1#f')]=_0x446216[_0x326a6e(0x173,'o)FA')]($request[_0x326a6e(0x18b,'jm*f')],_0x446216[_0x326a6e(0x12d,'WcFs')]),_0x1f4034[_0x326a6e(0xa0,'wCwi')]=_0x446216[_0x326a6e(0xd6,'&*3b')],_0x1f4034[_0x326a6e(0x9c,'b%Zx')]=_0x1f4034[_0x326a6e(0xc0,'v0dZ')]&&/^\/query\/.*?/[_0x326a6e(0xa4,'!&b(')](_0x1f4034[_0x326a6e(0x142,'XiV^')]),_0x1f4034[_0x326a6e(0x137,'!@zR')]=_0x1f4034[_0x326a6e(0x153,'!@zR')]&&/^\/api\/.*?/[_0x326a6e(0x96,'3HZv')](_0x1f4034[_0x326a6e(0xa6,'o)FA')]),_0x1f4034[_0x326a6e(0xca,'2TP2')]=_0x1f4034[_0x326a6e(0x10e,'o)FA')]&&!_0x1f4034[_0x326a6e(0x10a,'o$I[')]&&!_0x1f4034[_0x326a6e(0x95,'FT9D')];if(_0x1f4034[_0x326a6e(0x16b,'!@zR')])_0x446216[_0x326a6e(0x139,'CaMJ')](_0x446216[_0x326a6e(0x106,'YQy#')],_0x446216[_0x326a6e(0x159,'XiV^')])?(_0x1f4034[_0x326a6e(0x13c,'a1#f')]=_0x446216[_0x326a6e(0xab,']7r6')],await _0x446216[_0x326a6e(0xa3,'YQy#')](handleOptions)):_0x3c34fc+=_0x1c9936[_0x3b7a8a[_0x326a6e(0x116,'S]t0')](_0x446216[_0x326a6e(0xbc,'HrXv')](_0x8d126b[_0x326a6e(0x15d,'idUy')](),_0x1dec31[_0x326a6e(0xd2,'3V[0')]))];else{if(_0x1f4034[_0x326a6e(0xd8,'WcFs')])_0x1f4034[_0x326a6e(0x9d,'r^6g')]=_0x446216[_0x326a6e(0xc7,'!@zR')],await _0x446216[_0x326a6e(0x150,'F9lp')](_0x2d4cb6);else{if(_0x1f4034[_0x326a6e(0x186,'WcFs')])_0x1f4034[_0x326a6e(0xa9,'!@zR')]=_0x446216[_0x326a6e(0xb6,'hlQI')],_0x1f4034[_0x326a6e(0x109,'b]@n')]=await _0x446216[_0x326a6e(0x10d,'8ljY')](_0x53ca5b);else _0x1f4034[_0x326a6e(0xf3,'S]t0')]&&(_0x1f4034[_0x326a6e(0xe4,'S]t0')]=_0x446216[_0x326a6e(0x9f,'!@zR')],await _0x446216[_0x326a6e(0x168,'F9lp')](_0x512265));}}})()[_0x4fa59c(0x133,'7S$O')](_0x50c81b=>_0x1f4034[_0x4fa59c(0xdf,'^cIX')](_0x50c81b))[_0x4fa59c(0x98,'jDQ#')](()=>doneBox());async function _0x1c6e2d(_0x24214f,_0x48f9a0){const _0x2fc8ba=_0x4fa59c,_0x425966={'UvZVx':function(_0x85819c,_0x185d71){return _0x85819c!==_0x185d71;},'XxBeb':_0x2fc8ba(0x189,'S]t0'),'giARg':function(_0x3cca13,_0xe54dc4){return _0x3cca13(_0xe54dc4);},'xsjzN':function(_0x59c2d6,_0x5f120b){return _0x59c2d6===_0x5f120b;},'FaFWk':function(_0xb385cf,_0x2c3608){return _0xb385cf*_0x2c3608;},'VRijS':_0x2fc8ba(0x16a,'$3hO'),'IfxJQ':function(_0x5deab7,_0x136c9c){return _0x5deab7 in _0x136c9c;},'NnGMU':_0x2fc8ba(0x179,'*TBc'),'nhZYh':_0x2fc8ba(0xf6,'7S$O'),'PTHvL':_0x2fc8ba(0x130,'FV$7')};return _0x425966[_0x2fc8ba(0x166,'8ljY')](void 0x0,_0x48f9a0)&&(_0x48f9a0=_0x425966[_0x2fc8ba(0x13e,'3HZv')](_0x425966[_0x2fc8ba(0x8e,'WcFs')],_0x24214f)?_0x425966[_0x2fc8ba(0x140,'E&Ui')]:_0x425966[_0x2fc8ba(0x181,'EScW')]),new Promise((_0x28327b,_0x4c2eb7)=>{const _0x5d9d13=_0x2fc8ba,_0x247273={'iXsIR':function(_0x3d04dc,_0x522db2){const _0xcbe361=_0xd3df;return _0x425966[_0xcbe361(0xfa,'2TP2')](_0x3d04dc,_0x522db2);},'yPofX':function(_0x1b18ba,_0x95ba05){const _0x46e323=_0xd3df;return _0x425966[_0x46e323(0x92,'8ljY')](_0x1b18ba,_0x95ba05);}};_0x425966[_0x5d9d13(0x17d,'idUy')](_0x425966[_0x5d9d13(0x13f,'gvDj')],_0x425966[_0x5d9d13(0xfc,'3V[0')])?_0x247273[_0x5d9d13(0xda,'#pxQ')](_0x771b8a,0x8)||_0x247273[_0x5d9d13(0xc5,'^cIX')](_0x55094c,0xd)||_0x247273[_0x5d9d13(0x15b,'$3hO')](_0x309c7b,0x12)||_0x247273[_0x5d9d13(0xc5,'^cIX')](_0x3552e6,0x17)?_0x1bcbcb+='-':_0x516ba1+=_0x26158e[_0x186050[_0x5d9d13(0x10c,'*TBc')](_0x247273[_0x5d9d13(0x8c,')(5o')](_0x56a1b2[_0x5d9d13(0xa5,'r^6g')](),_0x3d49fe[_0x5d9d13(0xdc,'o$I[')]))]:_0x1f4034[_0x5d9d13(0x141,'7S$O')][_0x48f9a0[_0x5d9d13(0xc3,'jm*f')]()](_0x24214f)[_0x5d9d13(0xce,'@0lH')](_0x4d4ade=>{const _0x117268=_0x5d9d13;if(_0x425966[_0x117268(0x174,'!@zR')](_0x425966[_0x117268(0x8b,'CaMJ')],_0x425966[_0x117268(0x122,'tWIY')])){const _0x48b8b4=_0x4e6b2c?function(){const _0x36c636=_0x117268;if(_0x2e8d72){const _0x3252bf=_0xb1651d[_0x36c636(0x118,'tWIY')](_0x2119c6,arguments);return _0x4b3b85=null,_0x3252bf;}}:function(){};return _0x1ee6d3=![],_0x48b8b4;}else{let _0x311f14=_0x4d4ade[_0x117268(0x152,'!&b(')];_0x311f14=_0x1f4034[_0x117268(0x11b,'@1H7')](_0x311f14)||_0x311f14,_0x425966[_0x117268(0x151,'L3h1')](_0x28327b,_0x311f14);}})[_0x5d9d13(0x12b,'&*3b')](_0x71a57e=>_0x4c2eb7(_0x71a57e));});}function _0x327911(_0x1679e4){const _0x2b258c=_0x4fa59c,_0x46a244={'MvtaK':function(_0x5be5c2,_0x4d735f){return _0x5be5c2===_0x4d735f;},'pBjUR':function(_0x1d17d3,_0x2d9bdd){return _0x1d17d3-_0x2d9bdd;}};var _0x312f49=_0x46a244[_0x2b258c(0xf9,'MFnu')](_0x1679e4[_0x2b258c(0x17e,'L3h1')]('/'),_0x46a244[_0x2b258c(0xbe,'!@zR')](_0x1679e4[_0x2b258c(0x162,'F9lp')],0x1))?-0x1:void 0x0;return _0x1679e4[_0x2b258c(0x190,'XiV^')](_0x1679e4[_0x2b258c(0x9e,'tWIY')]('/',_0x1f4034[_0x2b258c(0xfb,'YQy#')][_0x2b258c(0x17a,'gvDj')]),_0x312f49);}
// prettier-ignore
//From chavyleung's Boxjs
function doneBox() { $.isOptions ? doneOptions() : $.isPage ? donePage() : $.isQuery ? doneQuery() : $.isApi ? doneApi() : $.done() } function getBaseDoneHeaders(e = {}) { return Object.assign({ "Access-Control-Allow-Origin": "*", "Access-Control-Allow-Methods": "POST,GET,OPTIONS,PUT,DELETE", "Access-Control-Allow-Headers": "Origin, X-Requested-With, Content-Type, Accept" }, e) } function getHtmlDoneHeaders() { return getBaseDoneHeaders({ "Content-Type": "text/html;charset=UTF-8" }) } function getJsonDoneHeaders() { return getBaseDoneHeaders({ "Content-Type": "application/json; charset=utf-8" }) } function doneOptions() { var e = getBaseDoneHeaders(); $.isQuanX() ? $.done({ headers: e }) : $.done({ response: { headers: e } }) } function donePage() { var e = getHtmlDoneHeaders(); $.isQuanX() ? $.done({ status: "HTTP/1.1 200", headers: e, body: $.html }) : $.done({ response: { status: 200, headers: e, body: $.html } }) } function doneQuery() { $.json = $.toStr($.json); var e = getJsonDoneHeaders(); $.isQuanX() ? $.done({ status: "HTTP/1.1 200", headers: e, body: $.json }) : $.done({ response: { status: 200, headers: e, body: $.json } }) } function doneApi() { $.json = $.toStr($.json); var e = getJsonDoneHeaders(); $.isQuanX() ? $.done({ status: "HTTP/1.1 200", headers: e, body: $.json }) : $.done({ response: { status: 200, headers: e, body: $.json } }) }
//From chavyleung's Env.js
function Env(t, e) { class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, a) => { s.call(this, t, (t, s, r) => { t ? a(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.encoding = "utf-8", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } getEnv() { return "undefined" != typeof $environment && $environment["surge-version"] ? "Surge" : "undefined" != typeof $environment && $environment["stash-version"] ? "Stash" : "undefined" != typeof module && module.exports ? "Node.js" : "undefined" != typeof $task ? "Quantumult X" : "undefined" != typeof $loon ? "Loon" : "undefined" != typeof $rocket ? "Shadowrocket" : void 0 } isNode() { return "Node.js" === this.getEnv() } isQuanX() { return "Quantumult X" === this.getEnv() } isSurge() { return "Surge" === this.getEnv() } isLoon() { return "Loon" === this.getEnv() } isShadowrocket() { return "Shadowrocket" === this.getEnv() } isStash() { return "Stash" === this.getEnv() } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const a = this.getdata(t); if (a) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, a) => e(a)) }) } runScript(t, e) { return new Promise(s => { let a = this.getdata("@chavy_boxjs_userCfgs.httpapi"); a = a ? a.replace(/\n/g, "").trim() : a; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [i, o] = a.split("@"), n = { url: `http://${o}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": i, Accept: "*/*" }, timeout: r }; this.post(n, (t, e, a) => s(a)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), a = !s && this.fs.existsSync(e); if (!s && !a) return {}; { const a = s ? t : e; try { return JSON.parse(this.fs.readFileSync(a)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), a = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : a ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const a = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of a) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, a) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[a + 1]) >> 0 == +e[a + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, a] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, a, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, a, r] = /^@(.*?)\.(.*?)$/.exec(e), i = this.getval(a), o = a ? "null" === i ? null : i || "{}" : "{}"; try { const e = JSON.parse(o); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), a) } catch (e) { const i = {}; this.lodash_set(i, r, t), s = this.setval(JSON.stringify(i), a) } } else s = this.setval(t, e); return s } getval(t) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": return $persistentStore.read(t); case "Quantumult X": return $prefs.valueForKey(t); case "Node.js": return this.data = this.loaddata(), this.data[t]; default: return this.data && this.data[t] || null } } setval(t, e) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": return $persistentStore.write(t, e); case "Quantumult X": return $prefs.setValueForKey(t, e); case "Node.js": return this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0; default: return this.data && this.data[e] || null } } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { switch (t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"], delete t.headers["content-type"], delete t.headers["content-length"]), t.params && (t.url += "?" + this.queryStr(t.params)), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, a) => { !t && s && (s.body = a, s.statusCode = s.status ? s.status : s.statusCode, s.status = s.statusCode), e(t, s, a) }); break; case "Quantumult X": this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: a, headers: r, body: i, bodyBytes: o } = t; e(null, { status: s, statusCode: a, headers: r, body: i, bodyBytes: o }, i, o) }, t => e(t && t.error || "UndefinedError")); break; case "Node.js": let s = require("iconv-lite"); this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: a, statusCode: r, headers: i, rawBody: o } = t, n = s.decode(o, this.encoding); e(null, { status: a, statusCode: r, headers: i, rawBody: o, body: n }, n) }, t => { const { message: a, response: r } = t; e(a, r, r && s.decode(r.rawBody, this.encoding)) }) } } post(t, e = (() => { })) { const s = t.method ? t.method.toLocaleLowerCase() : "post"; switch (t.body && t.headers && !t.headers["Content-Type"] && !t.headers["content-type"] && (t.headers["content-type"] = "application/x-www-form-urlencoded"), t.headers && (delete t.headers["Content-Length"], delete t.headers["content-length"]), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient[s](t, (t, s, a) => { !t && s && (s.body = a, s.statusCode = s.status ? s.status : s.statusCode, s.status = s.statusCode), e(t, s, a) }); break; case "Quantumult X": t.method = s, this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: a, headers: r, body: i, bodyBytes: o } = t; e(null, { status: s, statusCode: a, headers: r, body: i, bodyBytes: o }, i, o) }, t => e(t && t.error || "UndefinedError")); break; case "Node.js": let a = require("iconv-lite"); this.initGotEnv(t); const { url: r, ...i } = t; this.got[s](r, i).then(t => { const { statusCode: s, statusCode: r, headers: i, rawBody: o } = t, n = a.decode(o, this.encoding); e(null, { status: s, statusCode: r, headers: i, rawBody: o, body: n }, n) }, t => { const { message: s, response: r } = t; e(s, r, r && a.decode(r.rawBody, this.encoding)) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let a = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in a) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? a[e] : ("00" + a[e]).substr(("" + a[e]).length))); return t } queryStr(t) { let e = ""; for (const s in t) { let a = t[s]; null != a && "" !== a && ("object" == typeof a && (a = JSON.stringify(a)), e += `${s}=${a}&`) } return e = e.substring(0, e.length - 1), e } msg(e = t, s = "", a = "", r) { const i = t => { switch (typeof t) { case void 0: return t; case "string": switch (this.getEnv()) { case "Surge": case "Stash": default: return { url: t }; case "Loon": case "Shadowrocket": return t; case "Quantumult X": return { "open-url": t }; case "Node.js": return }case "object": switch (this.getEnv()) { case "Surge": case "Stash": case "Shadowrocket": default: { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } case "Loon": { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } case "Quantumult X": { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl, a = t["update-pasteboard"] || t.updatePasteboard; return { "open-url": e, "media-url": s, "update-pasteboard": a } } case "Node.js": return }default: return } }; if (!this.isMute) switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: $notification.post(e, s, a, i(r)); break; case "Quantumult X": $notify(e, s, a, i(r)); break; case "Node.js": }if (!this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), a && t.push(a), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": case "Quantumult X": default: this.log("", `❗️${this.name}, 错误!`, t); break; case "Node.js": this.log("", `❗️${this.name}, 错误!`, t.stack) } } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; switch (this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": case "Quantumult X": default: $done(t); break; case "Node.js": process.exit(1) } } }(t, e) }